
AVRASM ver. 2.2.8  M:\Lab3\Lab3\lab3.asm Wed Dec 04 18:56:28 2024

[builtin](2): Including file 'C:/7.0\Packs\Atmel\ATmega_DFP\2.1.506\avrasm\inc\m32U4def.inc'
M:\Lab3\Lab3\lab3.asm(28): Including file 'M:\Lab3\Lab3\delay.inc'
M:\Lab3\Lab3\lab3.asm(29): Including file 'M:\Lab3\Lab3\lcd.inc'
M:\Lab3\Lab3\lab3.asm(30): Including file 'M:\Lab3\Lab3\keyboard.inc'
M:\Lab3\Lab3\lab3.asm(31): Including file 'M:\Lab3\Lab3\Tarning.inc'
M:\Lab3\Lab3\lab3.asm(32): Including file 'M:\Lab3\Lab3\stat_data.inc'
M:\Lab3\Lab3\lab3.asm(33): Including file 'M:\Lab3\Lab3\stats.inc'
M:\Lab3\Lab3\lab3.asm(34): Including file 'M:\Lab3\Lab3\monitor.inc'
[builtin](2): Including file 'C:/7.0\Packs\Atmel\ATmega_DFP\2.1.506\avrasm\inc\m32U4def.inc'
M:\Lab3\Lab3\lab3.asm(28): Including file 'M:\Lab3\Lab3\delay.inc'
M:\Lab3\Lab3\lab3.asm(29): Including file 'M:\Lab3\Lab3\lcd.inc'
M:\Lab3\Lab3\lab3.asm(30): Including file 'M:\Lab3\Lab3\keyboard.inc'
M:\Lab3\Lab3\lab3.asm(31): Including file 'M:\Lab3\Lab3\Tarning.inc'
M:\Lab3\Lab3\lab3.asm(32): Including file 'M:\Lab3\Lab3\stat_data.inc'
M:\Lab3\Lab3\lab3.asm(33): Including file 'M:\Lab3\Lab3\stats.inc'
M:\Lab3\Lab3\lab3.asm(34): Including file 'M:\Lab3\Lab3\monitor.inc'
                                 
                                 ;
                                 
                                 ;***** Created: 2011-02-09 12:03 ******* Source: ATmega32U4.xml **********
                                 ;*************************************************************************
                                 ;* A P P L I C A T I O N   N O T E   F O R   T H E   A V R   F A M I L Y
                                 ;* 
                                 ;* Number            : AVR000
                                 ;* File Name         : "m32U4def.inc"
                                 ;* Title             : Register/Bit Definitions for the ATmega32U4
                                 ;* Date              : 2011-02-09
                                 ;* Version           : 2.35
                                 ;* Support E-mail    : avr@atmel.com
                                 ;* Target MCU        : ATmega32U4
                                 ;* 
                                 ;* DESCRIPTION
                                 ;* When including this file in the assembly program file, all I/O register 
                                 ;* names and I/O register bit names appearing in the data book can be used.
                                 ;* In addition, the six registers forming the three data pointers X, Y and 
                                 ;* Z have been assigned names XL - ZH. Highest RAM address for Internal 
                                 ;* SRAM is also defined 
                                 ;* 
                                 ;* The Register names are represented by their hexadecimal address.
                                 ;* 
                                 ;* The Register Bit names are represented by their bit number (0-7).
                                 ;* 
                                 ;* Please observe the difference in using the bit names with instructions
                                 ;* such as "sbr"/"cbr" (set/clear bit in register) and "sbrs"/"sbrc"
                                 ;* (skip if bit in register set/cleared). The following example illustrates
                                 ;* this:
                                 ;* 
                                 ;* in    r16,PORTB             ;read PORTB latch
                                 ;* sbr   r16,(1<<PB6)+(1<<PB5) ;set PB6 and PB5 (use masks, not bit#)
                                 ;* out   PORTB,r16             ;output to PORTB
                                 ;* 
                                 ;* in    r16,TIFR              ;read the Timer Interrupt Flag Register
                                 ;* sbrc  r16,TOV0              ;test the overflow flag (use bit#)
                                 ;* rjmp  TOV0_is_set           ;jump if set
                                 ;* ...                         ;otherwise do something else
                                 ;*************************************************************************
                                 
                                 #ifndef _M32U4DEF_INC_
                                 #define _M32U4DEF_INC_
                                 
                                 
                                 #pragma partinc 0
                                 
                                 ; ***** SPECIFY DEVICE ***************************************************
                                 .device ATmega32U4
                                 #pragma AVRPART ADMIN PART_NAME ATmega32U4
                                 .equ	SIGNATURE_000	= 0x1e
                                 .equ	SIGNATURE_001	= 0x95
                                 .equ	SIGNATURE_002	= 0x87
                                 
                                 #pragma AVRPART CORE CORE_VERSION V3
                                 
                                 
                                 ; ***** I/O REGISTER DEFINITIONS *****************************************
                                 ; NOTE:
                                 ; Definitions marked "MEMORY MAPPED"are extended I/O ports
                                 ; and cannot be used with IN/OUT instructions
                                 .equ	PLLCSR	= 0x29
                                 .equ	PLLFRQ	= 0x32
                                 .equ	UEINT	= 0xf4	; MEMORY MAPPED
                                 .equ	UEBCHX	= 0xf3	; MEMORY MAPPED
                                 .equ	UEBCLX	= 0xf2	; MEMORY MAPPED
                                 .equ	UEDATX	= 0xf1	; MEMORY MAPPED
                                 .equ	UEIENX	= 0xf0	; MEMORY MAPPED
                                 .equ	UESTA1X	= 0xef	; MEMORY MAPPED
                                 .equ	UESTA0X	= 0xee	; MEMORY MAPPED
                                 .equ	UECFG1X	= 0xed	; MEMORY MAPPED
                                 .equ	UECFG0X	= 0xec	; MEMORY MAPPED
                                 .equ	UECONX	= 0xeb	; MEMORY MAPPED
                                 .equ	UERST	= 0xea	; MEMORY MAPPED
                                 .equ	UENUM	= 0xe9	; MEMORY MAPPED
                                 .equ	UEINTX	= 0xe8	; MEMORY MAPPED
                                 .equ	UDMFN	= 0xe6	; MEMORY MAPPED
                                 .equ	UDFNUMH	= 0xe5	; MEMORY MAPPED
                                 .equ	UDFNUML	= 0xe4	; MEMORY MAPPED
                                 .equ	UDADDR	= 0xe3	; MEMORY MAPPED
                                 .equ	UDIEN	= 0xe2	; MEMORY MAPPED
                                 .equ	UDINT	= 0xe1	; MEMORY MAPPED
                                 .equ	UDCON	= 0xe0	; MEMORY MAPPED
                                 .equ	USBINT	= 0xda	; MEMORY MAPPED
                                 .equ	USBSTA	= 0xd9	; MEMORY MAPPED
                                 .equ	USBCON	= 0xd8	; MEMORY MAPPED
                                 .equ	UHWCON	= 0xd7	; MEMORY MAPPED
                                 .equ	UDR1	= 0xce	; MEMORY MAPPED
                                 .equ	UBRR1L	= 0xcc	; MEMORY MAPPED
                                 .equ	UBRR1H	= 0xcd	; MEMORY MAPPED
                                 .equ	UCSR1C	= 0xca	; MEMORY MAPPED
                                 .equ	UCSR1B	= 0xc9	; MEMORY MAPPED
                                 .equ	UCSR1A	= 0xc8	; MEMORY MAPPED
                                 .equ 	TWAMR		= 0xbd	;
                                 .equ  TWCR		= 0xbc	;
                                 .equ 	TWDR		= 0xbb	;
                                 .equ 	TWAR		= 0xba 	;
                                 .equ 	TWSR		= 0xb9	;
                                 .equ 	TWBR		= 0xb8	;
                                 .equ	OCR3CL	= 0x9c	; MEMORY MAPPED
                                 .equ	OCR3CH	= 0x9d	; MEMORY MAPPED
                                 .equ	OCR3BL	= 0x9a	; MEMORY MAPPED
                                 .equ	OCR3BH	= 0x9b	; MEMORY MAPPED
                                 .equ	OCR3AL	= 0x98	; MEMORY MAPPED
                                 .equ	OCR3AH	= 0x99	; MEMORY MAPPED
                                 .equ	ICR3L	= 0x96	; MEMORY MAPPED
                                 .equ	ICR3H	= 0x97	; MEMORY MAPPED
                                 .equ	TCNT3L	= 0x94	; MEMORY MAPPED
                                 .equ	TCNT3H	= 0x95	; MEMORY MAPPED
                                 .equ	TCCR3C	= 0x92	; MEMORY MAPPED
                                 .equ	TCCR3B	= 0x91	; MEMORY MAPPED
                                 .equ	TCCR3A	= 0x90	; MEMORY MAPPED
                                 .equ	OCR1CL	= 0x8c	; MEMORY MAPPED
                                 .equ	OCR1CH	= 0x8d	; MEMORY MAPPED
                                 .equ	OCR1BL	= 0x8a	; MEMORY MAPPED
                                 .equ	OCR1BH	= 0x8b	; MEMORY MAPPED
                                 .equ	OCR1AL	= 0x88	; MEMORY MAPPED
                                 .equ	OCR1AH	= 0x89	; MEMORY MAPPED
                                 .equ	ICR1L	= 0x86	; MEMORY MAPPED
                                 .equ	ICR1H	= 0x87	; MEMORY MAPPED
                                 .equ	TCNT1L	= 0x84	; MEMORY MAPPED
                                 .equ	TCNT1H	= 0x85	; MEMORY MAPPED
                                 .equ	TCCR1C	= 0x82	; MEMORY MAPPED
                                 .equ	TCCR1B	= 0x81	; MEMORY MAPPED
                                 .equ	TCCR1A	= 0x80	; MEMORY MAPPED
                                 .equ	DIDR1	= 0x7f	; MEMORY MAPPED
                                 .equ	DIDR0	= 0x7e	; MEMORY MAPPED
                                 .equ	DIDR2	= 0x7d	; MEMORY MAPPED
                                 .equ	ADMUX	= 0x7c	; MEMORY MAPPED
                                 .equ	ADCSRB	= 0x7b	; MEMORY MAPPED
                                 .equ	ADCSRA	= 0x7a	; MEMORY MAPPED
                                 .equ	ADCH	= 0x79	; MEMORY MAPPED
                                 .equ	ADCL	= 0x78	; MEMORY MAPPED
                                 .equ	TIMSK4	= 0x72	; MEMORY MAPPED
                                 .equ	TIMSK3	= 0x71	; MEMORY MAPPED
                                 .equ	TIMSK1	= 0x6f	; MEMORY MAPPED
                                 .equ	TIMSK0	= 0x6e	; MEMORY MAPPED
                                 .equ	PCMSK0	= 0x6b	; MEMORY MAPPED
                                 .equ	EICRB	= 0x6a	; MEMORY MAPPED
                                 .equ	EICRA	= 0x69	; MEMORY MAPPED
                                 .equ	PCICR	= 0x68	; MEMORY MAPPED
                                 .equ	OSCCAL	= 0x66	; MEMORY MAPPED
                                 .equ	RCCTRL	= 0x67	; MEMORY MAPPED
                                 .equ	PRR1	= 0x65	; MEMORY MAPPED
                                 .equ	PRR0	= 0x64	; MEMORY MAPPED
                                 .equ	CLKPR	= 0x61	; MEMORY MAPPED
                                 .equ	WDTCSR	= 0x60	; MEMORY MAPPED
                                 .equ	SREG	= 0x3f
                                 .equ	SPL	= 0x3d
                                 .equ	SPH	= 0x3e
                                 .equ	EIND	= 0x3c
                                 .equ	SPMCSR	= 0x37
                                 .equ	MCUCR	= 0x35
                                 .equ	MCUSR	= 0x34
                                 .equ	SMCR	= 0x33
                                 .equ	OCDR	= 0x31
                                 .equ	ACSR	= 0x30
                                 .equ	SPDR	= 0x2e
                                 .equ	SPSR	= 0x2d
                                 .equ	SPCR	= 0x2c
                                 .equ	GPIOR2	= 0x2b
                                 .equ	GPIOR1	= 0x2a
                                 .equ	OCR0B	= 0x28
                                 .equ	OCR0A	= 0x27
                                 .equ	TCNT0	= 0x26
                                 .equ	TCCR0B	= 0x25
                                 .equ	TCCR0A	= 0x24
                                 .equ	GTCCR	= 0x23
                                 .equ	EEARH	= 0x22
                                 .equ	EEARL	= 0x21
                                 .equ	EEDR	= 0x20
                                 .equ	EECR	= 0x1f
                                 .equ	GPIOR0	= 0x1e
                                 .equ	EIMSK	= 0x1d
                                 .equ	EIFR	= 0x1c
                                 .equ	PCIFR	= 0x1b
                                 .equ	TIFR4	= 0x19
                                 .equ	TIFR3	= 0x18
                                 .equ	TIFR2	= 0x17
                                 .equ	TIFR1	= 0x16
                                 .equ	TIFR0	= 0x15
                                 .equ	PORTF	= 0x11
                                 .equ	DDRF	= 0x10
                                 .equ	PINF	= 0x0f
                                 .equ	PORTE	= 0x0e
                                 .equ	DDRE	= 0x0d
                                 .equ	PINE	= 0x0c
                                 .equ	PORTD	= 0x0b
                                 .equ	DDRD	= 0x0a
                                 .equ	PIND	= 0x09
                                 .equ	PORTC	= 0x08
                                 .equ	DDRC	= 0x07
                                 .equ	PINC	= 0x06
                                 .equ	PORTB	= 0x05
                                 .equ	DDRB	= 0x04
                                 .equ	PINB	= 0x03
                                 .equ	DT4	= 0xd4	; MEMORY MAPPED
                                 .equ	OCR4D	= 0xd2	; MEMORY MAPPED
                                 .equ	OCR4C	= 0xd1	; MEMORY MAPPED
                                 .equ	OCR4B	= 0xd0	; MEMORY MAPPED
                                 .equ	OCR4A	= 0xcf	; MEMORY MAPPED
                                 .equ	TCCR4E	= 0xc4	; MEMORY MAPPED
                                 .equ	TCCR4D	= 0xc3	; MEMORY MAPPED
                                 .equ	TCCR4C	= 0xc2	; MEMORY MAPPED
                                 .equ	TCCR4B	= 0xc1	; MEMORY MAPPED
                                 .equ	TCCR4A	= 0xc0	; MEMORY MAPPED
                                 .equ	TC4H	= 0xbf	; MEMORY MAPPED
                                 .equ	TCNT4	= 0xbe	; MEMORY MAPPED
                                 .equ	CLKSEL1	= 0xc6	; MEMORY MAPPED
                                 .equ	CLKSEL0	= 0xc5	; MEMORY MAPPED
                                 .equ	CLKSTA	= 0xc7	; MEMORY MAPPED
                                 
                                 
                                 ; ***** BIT DEFINITIONS **************************************************
                                 
                                 ; ***** WATCHDOG *********************
                                 ; WDTCSR - Watchdog Timer Control Register
                                 .equ	WDP0	= 0	; Watch Dog Timer Prescaler bit 0
                                 .equ	WDP1	= 1	; Watch Dog Timer Prescaler bit 1
                                 .equ	WDP2	= 2	; Watch Dog Timer Prescaler bit 2
                                 .equ	WDE	= 3	; Watch Dog Enable
                                 .equ	WDCE	= 4	; Watchdog Change Enable
                                 .equ	WDP3	= 5	; Watchdog Timer Prescaler Bit 3
                                 .equ	WDIE	= 6	; Watchdog Timeout Interrupt Enable
                                 .equ	WDIF	= 7	; Watchdog Timeout Interrupt Flag
                                 
                                 
                                 ; ***** PORTD ************************
                                 ; PORTD - Port D Data Register
                                 .equ	PORTD0	= 0	; Port D Data Register bit 0
                                 .equ	PD0	= 0	; For compatibility
                                 .equ	PORTD1	= 1	; Port D Data Register bit 1
                                 .equ	PD1	= 1	; For compatibility
                                 .equ	PORTD2	= 2	; Port D Data Register bit 2
                                 .equ	PD2	= 2	; For compatibility
                                 .equ	PORTD3	= 3	; Port D Data Register bit 3
                                 .equ	PD3	= 3	; For compatibility
                                 .equ	PORTD4	= 4	; Port D Data Register bit 4
                                 .equ	PD4	= 4	; For compatibility
                                 .equ	PORTD5	= 5	; Port D Data Register bit 5
                                 .equ	PD5	= 5	; For compatibility
                                 .equ	PORTD6	= 6	; Port D Data Register bit 6
                                 .equ	PD6	= 6	; For compatibility
                                 .equ	PORTD7	= 7	; Port D Data Register bit 7
                                 .equ	PD7	= 7	; For compatibility
                                 
                                 ; DDRD - Port D Data Direction Register
                                 .equ	DDD0	= 0	; Port D Data Direction Register bit 0
                                 .equ	DDD1	= 1	; Port D Data Direction Register bit 1
                                 .equ	DDD2	= 2	; Port D Data Direction Register bit 2
                                 .equ	DDD3	= 3	; Port D Data Direction Register bit 3
                                 .equ	DDD4	= 4	; Port D Data Direction Register bit 4
                                 .equ	DDD5	= 5	; Port D Data Direction Register bit 5
                                 .equ	DDD6	= 6	; Port D Data Direction Register bit 6
                                 .equ	DDD7	= 7	; Port D Data Direction Register bit 7
                                 
                                 ; PIND - Port D Input Pins
                                 .equ	PIND0	= 0	; Port D Input Pins bit 0
                                 .equ	PIND1	= 1	; Port D Input Pins bit 1
                                 .equ	PIND2	= 2	; Port D Input Pins bit 2
                                 .equ	PIND3	= 3	; Port D Input Pins bit 3
                                 .equ	PIND4	= 4	; Port D Input Pins bit 4
                                 .equ	PIND5	= 5	; Port D Input Pins bit 5
                                 .equ	PIND6	= 6	; Port D Input Pins bit 6
                                 .equ	PIND7	= 7	; Port D Input Pins bit 7
                                 
                                 
                                 ; ***** SPI **************************
                                 ; SPDR - SPI Data Register
                                 .equ	SPDR0	= 0	; SPI Data Register bit 0
                                 .equ	SPDR1	= 1	; SPI Data Register bit 1
                                 .equ	SPDR2	= 2	; SPI Data Register bit 2
                                 .equ	SPDR3	= 3	; SPI Data Register bit 3
                                 .equ	SPDR4	= 4	; SPI Data Register bit 4
                                 .equ	SPDR5	= 5	; SPI Data Register bit 5
                                 .equ	SPDR6	= 6	; SPI Data Register bit 6
                                 .equ	SPDR7	= 7	; SPI Data Register bit 7
                                 
                                 ; SPSR - SPI Status Register
                                 .equ	SPI2X	= 0	; Double SPI Speed Bit
                                 .equ	WCOL	= 6	; Write Collision Flag
                                 .equ	SPIF	= 7	; SPI Interrupt Flag
                                 
                                 ; SPCR - SPI Control Register
                                 .equ	SPR0	= 0	; SPI Clock Rate Select 0
                                 .equ	SPR1	= 1	; SPI Clock Rate Select 1
                                 .equ	CPHA	= 2	; Clock Phase
                                 .equ	CPOL	= 3	; Clock polarity
                                 .equ	MSTR	= 4	; Master/Slave Select
                                 .equ	DORD	= 5	; Data Order
                                 .equ	SPE	= 6	; SPI Enable
                                 .equ	SPIE	= 7	; SPI Interrupt Enable
                                 
                                 
                                 ; ***** USART1 ***********************
                                 ; UDR1 - USART I/O Data Register
                                 .equ	UDR1_0	= 0	; USART I/O Data Register bit 0
                                 .equ	UDR1_1	= 1	; USART I/O Data Register bit 1
                                 .equ	UDR1_2	= 2	; USART I/O Data Register bit 2
                                 .equ	UDR1_3	= 3	; USART I/O Data Register bit 3
                                 .equ	UDR1_4	= 4	; USART I/O Data Register bit 4
                                 .equ	UDR1_5	= 5	; USART I/O Data Register bit 5
                                 .equ	UDR1_6	= 6	; USART I/O Data Register bit 6
                                 .equ	UDR1_7	= 7	; USART I/O Data Register bit 7
                                 
                                 ; UCSR1A - USART Control and Status Register A
                                 .equ	MPCM1	= 0	; Multi-processor Communication Mode
                                 .equ	U2X1	= 1	; Double the USART transmission speed
                                 .equ	UPE1	= 2	; Parity Error
                                 .equ	DOR1	= 3	; Data overRun
                                 .equ	FE1	= 4	; Framing Error
                                 .equ	UDRE1	= 5	; USART Data Register Empty
                                 .equ	TXC1	= 6	; USART Transmitt Complete
                                 .equ	RXC1	= 7	; USART Receive Complete
                                 
                                 ; UCSR1B - USART Control and Status Register B
                                 .equ	TXB81	= 0	; Transmit Data Bit 8
                                 .equ	RXB81	= 1	; Receive Data Bit 8
                                 .equ	UCSZ12	= 2	; Character Size
                                 .equ	TXEN1	= 3	; Transmitter Enable
                                 .equ	RXEN1	= 4	; Receiver Enable
                                 .equ	UDRIE1	= 5	; USART Data register Empty Interrupt Enable
                                 .equ	TXCIE1	= 6	; TX Complete Interrupt Enable
                                 .equ	RXCIE1	= 7	; RX Complete Interrupt Enable
                                 
                                 ; UCSR1C - USART Control and Status Register C
                                 .equ	UCPOL1	= 0	; Clock Polarity
                                 .equ	UCSZ10	= 1	; Character Size
                                 .equ	UCPHA1	= UCSZ10	; For compatibility
                                 .equ	UCSZ11	= 2	; Character Size
                                 .equ	UDORD1	= UCSZ11	; For compatibility
                                 .equ	USBS1	= 3	; Stop Bit Select
                                 .equ	UPM10	= 4	; Parity Mode Bit 0
                                 .equ	UPM11	= 5	; Parity Mode Bit 1
                                 .equ	UMSEL10	= 6	; USART Mode Select
                                 .equ	UMSEL11	= 7	; USART Mode Select
                                 
                                 ; UBRR1H - USART Baud Rate Register High Byte
                                 .equ	UBRR_8	= 0	; USART Baud Rate Register bit 8
                                 .equ	UBRR_9	= 1	; USART Baud Rate Register bit 9
                                 .equ	UBRR_10	= 2	; USART Baud Rate Register bit 10
                                 .equ	UBRR_11	= 3	; USART Baud Rate Register bit 11
                                 
                                 ; UBRR1L - USART Baud Rate Register Low Byte
                                 .equ	UBRR_0	= 0	; USART Baud Rate Register bit 0
                                 .equ	UBRR_1	= 1	; USART Baud Rate Register bit 1
                                 .equ	UBRR_2	= 2	; USART Baud Rate Register bit 2
                                 .equ	UBRR_3	= 3	; USART Baud Rate Register bit 3
                                 .equ	UBRR_4	= 4	; USART Baud Rate Register bit 4
                                 .equ	UBRR_5	= 5	; USART Baud Rate Register bit 5
                                 .equ	UBRR_6	= 6	; USART Baud Rate Register bit 6
                                 .equ	UBRR_7	= 7	; USART Baud Rate Register bit 7
                                 
                                 
                                 ; ***** BOOT_LOAD ********************
                                 ; SPMCSR - Store Program Memory Control Register
                                 .equ	SPMEN	= 0	; Store Program Memory Enable
                                 .equ	PGERS	= 1	; Page Erase
                                 .equ	PGWRT	= 2	; Page Write
                                 .equ	BLBSET	= 3	; Boot Lock Bit Set
                                 .equ	RWWSRE	= 4	; Read While Write section read enable
                                 .equ	SIGRD	= 5	; Signature Row Read
                                 .equ	RWWSB	= 6	; Read While Write Section Busy
                                 .equ	SPMIE	= 7	; SPM Interrupt Enable
                                 
                                 
                                 ; ***** EEPROM ***********************
                                 ; EEARH - EEPROM Address Register Low Byte
                                 .equ	EEAR8	= 0	; EEPROM Read/Write Access Bit 8
                                 .equ	EEAR9	= 1	; EEPROM Read/Write Access Bit 9
                                 .equ	EEAR10	= 2	; EEPROM Read/Write Access Bit 10
                                 .equ	EEAR11	= 3	; EEPROM Read/Write Access Bit 11
                                 
                                 ; EEARL - EEPROM Address Register Low Byte
                                 .equ	EEAR0	= 0	; EEPROM Read/Write Access Bit 0
                                 .equ	EEAR1	= 1	; EEPROM Read/Write Access Bit 1
                                 .equ	EEAR2	= 2	; EEPROM Read/Write Access Bit 2
                                 .equ	EEAR3	= 3	; EEPROM Read/Write Access Bit 3
                                 .equ	EEAR4	= 4	; EEPROM Read/Write Access Bit 4
                                 .equ	EEAR5	= 5	; EEPROM Read/Write Access Bit 5
                                 .equ	EEAR6	= 6	; EEPROM Read/Write Access Bit 6
                                 .equ	EEAR7	= 7	; EEPROM Read/Write Access Bit 7
                                 
                                 ; EEDR - EEPROM Data Register
                                 .equ	EEDR0	= 0	; EEPROM Data Register bit 0
                                 .equ	EEDR1	= 1	; EEPROM Data Register bit 1
                                 .equ	EEDR2	= 2	; EEPROM Data Register bit 2
                                 .equ	EEDR3	= 3	; EEPROM Data Register bit 3
                                 .equ	EEDR4	= 4	; EEPROM Data Register bit 4
                                 .equ	EEDR5	= 5	; EEPROM Data Register bit 5
                                 .equ	EEDR6	= 6	; EEPROM Data Register bit 6
                                 .equ	EEDR7	= 7	; EEPROM Data Register bit 7
                                 
                                 ; EECR - EEPROM Control Register
                                 .equ	EERE	= 0	; EEPROM Read Enable
                                 .equ	EEPE	= 1	; EEPROM Write Enable
                                 .equ	EEMPE	= 2	; EEPROM Master Write Enable
                                 .equ	EERIE	= 3	; EEPROM Ready Interrupt Enable
                                 .equ	EEPM0	= 4	; EEPROM Programming Mode Bit 0
                                 .equ	EEPM1	= 5	; EEPROM Programming Mode Bit 1
                                 
                                 
                                 ; ***** TIMER_COUNTER_0 **************
                                 ; TIMSK0 - Timer/Counter0 Interrupt Mask Register
                                 .equ	TOIE0	= 0	; Timer/Counter0 Overflow Interrupt Enable
                                 .equ	OCIE0A	= 1	; Timer/Counter0 Output Compare Match A Interrupt Enable
                                 .equ	OCIE0B	= 2	; Timer/Counter0 Output Compare Match B Interrupt Enable
                                 
                                 ; TIFR0 - Timer/Counter0 Interrupt Flag register
                                 .equ	TOV0	= 0	; Timer/Counter0 Overflow Flag
                                 .equ	OCF0A	= 1	; Timer/Counter0 Output Compare Flag 0A
                                 .equ	OCF0B	= 2	; Timer/Counter0 Output Compare Flag 0B
                                 
                                 ; TCCR0A - Timer/Counter  Control Register A
                                 .equ	WGM00	= 0	; Waveform Generation Mode
                                 .equ	WGM01	= 1	; Waveform Generation Mode
                                 .equ	COM0B0	= 4	; Compare Output Mode, Fast PWm
                                 .equ	COM0B1	= 5	; Compare Output Mode, Fast PWm
                                 .equ	COM0A0	= 6	; Compare Output Mode, Phase Correct PWM Mode
                                 .equ	COM0A1	= 7	; Compare Output Mode, Phase Correct PWM Mode
                                 
                                 ; TCCR0B - Timer/Counter Control Register B
                                 .equ	CS00	= 0	; Clock Select
                                 .equ	CS01	= 1	; Clock Select
                                 .equ	CS02	= 2	; Clock Select
                                 .equ	WGM02	= 3	; 
                                 .equ	FOC0B	= 6	; Force Output Compare B
                                 .equ	FOC0A	= 7	; Force Output Compare A
                                 
                                 ; TCNT0 - Timer/Counter0
                                 .equ	TCNT0_0	= 0	; 
                                 .equ	TCNT0_1	= 1	; 
                                 .equ	TCNT0_2	= 2	; 
                                 .equ	TCNT0_3	= 3	; 
                                 .equ	TCNT0_4	= 4	; 
                                 .equ	TCNT0_5	= 5	; 
                                 .equ	TCNT0_6	= 6	; 
                                 .equ	TCNT0_7	= 7	; 
                                 
                                 ; OCR0A - Timer/Counter0 Output Compare Register
                                 .equ	OCR0A_0	= 0	; 
                                 .equ	OCR0A_1	= 1	; 
                                 .equ	OCR0A_2	= 2	; 
                                 .equ	OCR0A_3	= 3	; 
                                 .equ	OCR0A_4	= 4	; 
                                 .equ	OCR0A_5	= 5	; 
                                 .equ	OCR0A_6	= 6	; 
                                 .equ	OCR0A_7	= 7	; 
                                 
                                 ; OCR0B - Timer/Counter0 Output Compare Register
                                 .equ	OCR0B_0	= 0	; 
                                 .equ	OCR0B_1	= 1	; 
                                 .equ	OCR0B_2	= 2	; 
                                 .equ	OCR0B_3	= 3	; 
                                 .equ	OCR0B_4	= 4	; 
                                 .equ	OCR0B_5	= 5	; 
                                 .equ	OCR0B_6	= 6	; 
                                 .equ	OCR0B_7	= 7	; 
                                 
                                 ; GTCCR - General Timer/Counter Control Register
                                 .equ	PSRSYNC	= 0	; Prescaler Reset Timer/Counter1 and Timer/Counter0
                                 .equ	PSR10	= PSRSYNC	; For compatibility
                                 .equ	TSM	= 7	; Timer/Counter Synchronization Mode
                                 
                                 
                                 ; ***** TIMER_COUNTER_3 **************
                                 ; TIMSK3 - Timer/Counter3 Interrupt Mask Register
                                 .equ	TOIE3	= 0	; Timer/Counter3 Overflow Interrupt Enable
                                 .equ	OCIE3A	= 1	; Timer/Counter3 Output Compare A Match Interrupt Enable
                                 .equ	OCIE3B	= 2	; Timer/Counter3 Output Compare B Match Interrupt Enable
                                 .equ	OCIE3C	= 3	; Timer/Counter3 Output Compare C Match Interrupt Enable
                                 .equ	ICIE3	= 5	; Timer/Counter3 Input Capture Interrupt Enable
                                 
                                 ; TIFR3 - Timer/Counter3 Interrupt Flag register
                                 .equ	TOV3	= 0	; Timer/Counter3 Overflow Flag
                                 .equ	OCF3A	= 1	; Output Compare Flag 3A
                                 .equ	OCF3B	= 2	; Output Compare Flag 3B
                                 .equ	OCF3C	= 3	; Output Compare Flag 3C
                                 .equ	ICF3	= 5	; Input Capture Flag 3
                                 
                                 ; TCCR3A - Timer/Counter3 Control Register A
                                 .equ	WGM30	= 0	; Waveform Generation Mode
                                 .equ	WGM31	= 1	; Waveform Generation Mode
                                 .equ	COM3C0	= 2	; Compare Output Mode 3C, bit 0
                                 .equ	COM3C1	= 3	; Compare Output Mode 3C, bit 1
                                 .equ	COM3B0	= 4	; Compare Output Mode 3B, bit 0
                                 .equ	COM3B1	= 5	; Compare Output Mode 3B, bit 1
                                 .equ	COM3A0	= 6	; Compare Output Mode 3A, bit 0
                                 .equ	COM3A1	= 7	; Compare Output Mode 1A, bit 1
                                 
                                 ; TCCR3B - Timer/Counter3 Control Register B
                                 .equ	CS30	= 0	; Prescaler source of Timer/Counter 3
                                 .equ	CS31	= 1	; Prescaler source of Timer/Counter 3
                                 .equ	CS32	= 2	; Prescaler source of Timer/Counter 3
                                 .equ	WGM32	= 3	; Waveform Generation Mode
                                 .equ	WGM33	= 4	; Waveform Generation Mode
                                 .equ	ICES3	= 6	; Input Capture 3 Edge Select
                                 .equ	ICNC3	= 7	; Input Capture 3 Noise Canceler
                                 
                                 ; TCCR3C - Timer/Counter 3 Control Register C
                                 .equ	FOC3C	= 5	; Force Output Compare 3C
                                 .equ	FOC3B	= 6	; Force Output Compare 3B
                                 .equ	FOC3A	= 7	; Force Output Compare 3A
                                 
                                 
                                 ; ***** TIMER_COUNTER_1 **************
                                 ; TIMSK1 - Timer/Counter1 Interrupt Mask Register
                                 .equ	TOIE1	= 0	; Timer/Counter1 Overflow Interrupt Enable
                                 .equ	OCIE1A	= 1	; Timer/Counter1 Output Compare A Match Interrupt Enable
                                 .equ	OCIE1B	= 2	; Timer/Counter1 Output Compare B Match Interrupt Enable
                                 .equ	OCIE1C	= 3	; Timer/Counter1 Output Compare C Match Interrupt Enable
                                 .equ	ICIE1	= 5	; Timer/Counter1 Input Capture Interrupt Enable
                                 
                                 ; TIFR1 - Timer/Counter1 Interrupt Flag register
                                 .equ	TOV1	= 0	; Timer/Counter1 Overflow Flag
                                 .equ	OCF1A	= 1	; Output Compare Flag 1A
                                 .equ	OCF1B	= 2	; Output Compare Flag 1B
                                 .equ	OCF1C	= 3	; Output Compare Flag 1C
                                 .equ	ICF1	= 5	; Input Capture Flag 1
                                 
                                 ; TCCR1A - Timer/Counter1 Control Register A
                                 .equ	WGM10	= 0	; Waveform Generation Mode
                                 .equ	WGM11	= 1	; Waveform Generation Mode
                                 .equ	COM1C0	= 2	; Compare Output Mode 1C, bit 0
                                 .equ	COM1C1	= 3	; Compare Output Mode 1C, bit 1
                                 .equ	COM1B0	= 4	; Compare Output Mode 1B, bit 0
                                 .equ	COM1B1	= 5	; Compare Output Mode 1B, bit 1
                                 .equ	COM1A0	= 6	; Compare Output Mode 1A, bit 0
                                 .equ	COM1A1	= 7	; Compare Output Mode 1A, bit 1
                                 
                                 ; TCCR1B - Timer/Counter1 Control Register B
                                 .equ	CS10	= 0	; Prescaler source of Timer/Counter 1
                                 .equ	CS11	= 1	; Prescaler source of Timer/Counter 1
                                 .equ	CS12	= 2	; Prescaler source of Timer/Counter 1
                                 .equ	WGM12	= 3	; Waveform Generation Mode
                                 .equ	WGM13	= 4	; Waveform Generation Mode
                                 .equ	ICES1	= 6	; Input Capture 1 Edge Select
                                 .equ	ICNC1	= 7	; Input Capture 1 Noise Canceler
                                 
                                 ; TCCR1C - Timer/Counter 1 Control Register C
                                 .equ	FOC1C	= 5	; Force Output Compare 1C
                                 .equ	FOC1B	= 6	; Force Output Compare 1B
                                 .equ	FOC1A	= 7	; Force Output Compare 1A
                                 
                                 
                                 ; ***** JTAG *************************
                                 ; OCDR - On-Chip Debug Related Register in I/O Memory
                                 .equ	OCDR0	= 0	; On-Chip Debug Register Bit 0
                                 .equ	OCDR1	= 1	; On-Chip Debug Register Bit 1
                                 .equ	OCDR2	= 2	; On-Chip Debug Register Bit 2
                                 .equ	OCDR3	= 3	; On-Chip Debug Register Bit 3
                                 .equ	OCDR4	= 4	; On-Chip Debug Register Bit 4
                                 .equ	OCDR5	= 5	; On-Chip Debug Register Bit 5
                                 .equ	OCDR6	= 6	; On-Chip Debug Register Bit 6
                                 .equ	OCDR7	= 7	; On-Chip Debug Register Bit 7
                                 .equ	IDRD	= OCDR7	; For compatibility
                                 
                                 ; MCUCR - MCU Control Register
                                 .equ	JTD	= 7	; JTAG Interface Disable
                                 
                                 ; MCUSR - MCU Status Register
                                 .equ	JTRF	= 4	; JTAG Reset Flag
                                 
                                 
                                 ; ***** EXTERNAL_INTERRUPT ***********
                                 ; EICRA - External Interrupt Control Register A
                                 .equ	ISC00	= 0	; External Interrupt Sense Control Bit
                                 .equ	ISC01	= 1	; External Interrupt Sense Control Bit
                                 .equ	ISC10	= 2	; External Interrupt Sense Control Bit
                                 .equ	ISC11	= 3	; External Interrupt Sense Control Bit
                                 .equ	ISC20	= 4	; External Interrupt Sense Control Bit
                                 .equ	ISC21	= 5	; External Interrupt Sense Control Bit
                                 .equ	ISC30	= 6	; External Interrupt Sense Control Bit
                                 .equ	ISC31	= 7	; External Interrupt Sense Control Bit
                                 
                                 ; EICRB - External Interrupt Control Register B
                                 .equ	ISC40	= 0	; External Interrupt 7-4 Sense Control Bit
                                 .equ	ISC41	= 1	; External Interrupt 7-4 Sense Control Bit
                                 .equ	ISC50	= 2	; External Interrupt 7-4 Sense Control Bit
                                 .equ	ISC51	= 3	; External Interrupt 7-4 Sense Control Bit
                                 .equ	ISC60	= 4	; External Interrupt 7-4 Sense Control Bit
                                 .equ	ISC61	= 5	; External Interrupt 7-4 Sense Control Bit
                                 .equ	ISC70	= 6	; External Interrupt 7-4 Sense Control Bit
                                 .equ	ISC71	= 7	; External Interrupt 7-4 Sense Control Bit
                                 
                                 ; EIMSK - External Interrupt Mask Register
                                 .equ	INT0	= 0	; External Interrupt Request 0 Enable
                                 .equ	INT1	= 1	; External Interrupt Request 1 Enable
                                 .equ	INT2	= 2	; External Interrupt Request 2 Enable
                                 .equ	INT3	= 3	; External Interrupt Request 3 Enable
                                 .equ	INT4	= 4	; External Interrupt Request 4 Enable
                                 .equ	INT5	= 5	; External Interrupt Request 5 Enable
                                 .equ	INT6	= 6	; External Interrupt Request 6 Enable
                                 .equ	INT7	= 7	; External Interrupt Request 7 Enable
                                 
                                 ; EIFR - External Interrupt Flag Register
                                 .equ	INTF0	= 0	; External Interrupt Flag 0
                                 .equ	INTF1	= 1	; External Interrupt Flag 1
                                 .equ	INTF2	= 2	; External Interrupt Flag 2
                                 .equ	INTF3	= 3	; External Interrupt Flag 3
                                 .equ	INTF4	= 4	; External Interrupt Flag 4
                                 .equ	INTF5	= 5	; External Interrupt Flag 5
                                 .equ	INTF6	= 6	; External Interrupt Flag 6
                                 .equ	INTF7	= 7	; External Interrupt Flag 7
                                 
                                 ; PCICR - Pin Change Interrupt Control Register
                                 .equ	PCIE0	= 0	; Pin Change Interrupt Enable 0
                                 
                                 ; PCIFR - Pin Change Interrupt Flag Register
                                 .equ	PCIF0	= 0	; Pin Change Interrupt Flag 0
                                 
                                 ; PCMSK0 - Pin Change Mask Register 0
                                 .equ	PCINT0	= 0	; Pin Change Enable Mask 0
                                 .equ	PCINT1	= 1	; Pin Change Enable Mask 1
                                 .equ	PCINT2	= 2	; Pin Change Enable Mask 2
                                 .equ	PCINT3	= 3	; Pin Change Enable Mask 3
                                 .equ	PCINT4	= 4	; Pin Change Enable Mask 4
                                 .equ	PCINT5	= 5	; Pin Change Enable Mask 5
                                 .equ	PCINT6	= 6	; Pin Change Enable Mask 6
                                 .equ	PCINT7	= 7	; Pin Change Enable Mask 7
                                 
                                 
                                 ; ***** TIMER_COUNTER_4 **************
                                 ; DT4 - Timer/Counter 4 Dead Time Value
                                 .equ	DT4L0	= 0	; Timer/Counter 4 Dead Time Value Bit 0
                                 .equ	DT4L1	= 1	; Timer/Counter 4 Dead Time Value Bit 1
                                 .equ	DT4L2	= 2	; Timer/Counter 4 Dead Time Value Bit 2
                                 .equ	DT4L3	= 3	; Timer/Counter 4 Dead Time Value Bit 3
                                 .equ	DT4L4	= 4	; Timer/Counter 4 Dead Time Value Bit 4
                                 .equ	DT4L5	= 5	; Timer/Counter 4 Dead Time Value Bit 5
                                 .equ	DT4L6	= 6	; Timer/Counter 4 Dead Time Value Bit 6
                                 .equ	DT4L7	= 7	; Timer/Counter 4 Dead Time Value Bit 7
                                 
                                 ; TIFR4 - Timer/Counter4 Interrupt Flag register
                                 .equ	TOV4	= 2	; Timer/Counter4 Overflow Flag
                                 .equ	OCF4B	= 5	; Output Compare Flag 4B
                                 .equ	OCF4A	= 6	; Output Compare Flag 4A
                                 .equ	OCF4D	= 7	; Output Compare Flag 4D
                                 
                                 ; TIMSK4 - Timer/Counter4 Interrupt Mask Register
                                 .equ	TOIE4	= 2	; Timer/Counter4 Overflow Interrupt Enable
                                 .equ	OCIE4B	= 5	; Timer/Counter4 Output Compare B Match Interrupt Enable
                                 .equ	OCIE4A	= 6	; Timer/Counter4 Output Compare A Match Interrupt Enable
                                 .equ	OCIE4D	= 7	; Timer/Counter4 Output Compare D Match Interrupt Enable
                                 
                                 ; OCR4D - Timer/Counter4 Output Compare Register D
                                 .equ	OCR4D0	= 0	; Timer/Counter4 Output Compare Register Low Byte bit 0
                                 .equ	OCR4D1	= 1	; Timer/Counter4 Output Compare Register Low Byte bit 1
                                 .equ	OCR4D2	= 2	; Timer/Counter4 Output Compare Register Low Byte bit 2
                                 .equ	OCR4D3	= 3	; Timer/Counter4 Output Compare Register Low Byte bit 3
                                 .equ	OCR4D4	= 4	; Timer/Counter4 Output Compare Register Low Byte bit 4
                                 .equ	OCR4D5	= 5	; Timer/Counter4 Output Compare Register Low Byte bit 5
                                 .equ	OCR4D6	= 6	; Timer/Counter4 Output Compare Register Low Byte bit 6
                                 .equ	OCR4D7	= 7	; Timer/Counter4 Output Compare Register Low Byte bit 7
                                 
                                 ; OCR4C - Timer/Counter4 Output Compare Register C
                                 .equ	OCR4C0	= 0	; Timer/Counter4 Output Compare Register bit 0
                                 .equ	OCR4C1	= 1	; Timer/Counter4 Output Compare Register bit 1
                                 .equ	OCR4C2	= 2	; Timer/Counter4 Output Compare Register bit 2
                                 .equ	OCR4C3	= 3	; Timer/Counter4 Output Compare Register bit 3
                                 .equ	OCR4C4	= 4	; Timer/Counter4 Output Compare Register bit 4
                                 .equ	OCR4C5	= 5	; Timer/Counter4 Output Compare Register bit 5
                                 .equ	OCR4C6	= 6	; Timer/Counter4 Output Compare Register 6
                                 .equ	OCR4C7	= 7	; Timer/Counter4 Output Compare Register bit 7
                                 
                                 ; OCR4B - Timer/Counter4 Output Compare Register B
                                 .equ	OCR4B0	= 0	; Timer/Counter4 Output Compare Register bit 0
                                 .equ	OCR4B1	= 1	; Timer/Counter4 Output Compare Register bit 1
                                 .equ	OCR4B2	= 2	; Timer/Counter4 Output Compare Register bit 2
                                 .equ	OCR4B3	= 3	; Timer/Counter4 Output Compare Register bit 3
                                 .equ	OCR4B4	= 4	; Timer/Counter4 Output Compare Register bit 4
                                 .equ	OCR4B5	= 5	; Timer/Counter4 Output Compare Register bit 5
                                 .equ	OCR4B6	= 6	; Timer/Counter4 Output Compare Register bit 6
                                 .equ	OCR4B7	= 7	; Timer/Counter4 Output Compare Register bit 7
                                 
                                 ; OCR4A - Timer/Counter4 Output Compare Register A
                                 .equ	OCR4A0	= 0	; Timer/Counter4 Output Compare Register Bit 0
                                 .equ	OCR4A1	= 1	; Timer/Counter4 Output Compare Register Bit 1
                                 .equ	OCR4A2	= 2	; Timer/Counter4 Output Compare Register Low Byte Bit 2
                                 .equ	OCR4A3	= 3	; Timer/Counter4 Output Compare Register Low Byte Bit 3
                                 .equ	OCR4A4	= 4	; Timer/Counter4 Output Compare Register Bit 4
                                 .equ	OCR4A5	= 5	; Timer/Counter4 Output Compare Register Bit 5
                                 .equ	OCR4A6	= 6	; Timer/Counter4 Output Compare Register Bit 6
                                 .equ	OCR4A7	= 7	; Timer/Counter4 Output Compare Register Bit 7
                                 
                                 ; TC4H - Timer/Counter4
                                 .equ	TC48	= 0	; Timer/Counter4 bit 8
                                 .equ	TC49	= 1	; Timer/Counter4 bit 9
                                 .equ	TC410	= 2	; Timer/Counter4 bit 10
                                 
                                 ; TCNT4 - Timer/Counter4 Low Bytes
                                 .equ	TC40	= 0	; Timer/Counter4 bit 0
                                 .equ	TC41	= 1	; Timer/Counter4 bit 1
                                 .equ	TC42	= 2	; Timer/Counter4 bit 2
                                 .equ	TC43	= 3	; Timer/Counter4  bit 3
                                 .equ	TC44	= 4	; Timer/Counter4 bit 4
                                 .equ	TC45	= 5	; Timer/Counter4 bit 5
                                 .equ	TC46	= 6	; Timer/Counter4 bit 6
                                 .equ	TC47	= 7	; Timer/Counter4 bit 7
                                 
                                 ; TCCR4E - Timer/Counter 4 Control Register E
                                 .equ	OC4OE0	= 0	; Output Compare Override Enable bit
                                 .equ	OC4OE1	= 1	; Output Compare Override Enable bit
                                 .equ	OC4OE2	= 2	; Output Compare Override Enable bit
                                 .equ	OC4OE3	= 3	; Output Compare Override Enable bit
                                 .equ	OC4OE4	= 4	; Output Compare Override Enable bit
                                 .equ	OC4OE5	= 5	; Output Compare Override Enable bit
                                 .equ	ENHC4	= 6	; Enhanced Compare/PWM Mode
                                 .equ	TLOCK4	= 7	; Register Update Lock
                                 
                                 ; TCCR4D - Timer/Counter 4 Control Register D
                                 .equ	WGM40	= 0	; Waveform Generation Mode bits
                                 .equ	WGM41	= 1	; Waveform Generation Mode bits
                                 .equ	FPF4	= 2	; Fault Protection Interrupt Flag
                                 .equ	FPAC4	= 3	; Fault Protection Analog Comparator Enable
                                 .equ	FPES4	= 4	; Fault Protection Edge Select
                                 .equ	FPNC4	= 5	; Fault Protection Noise Canceler
                                 .equ	FPEN4	= 6	; Fault Protection Mode Enable
                                 .equ	FPIE4	= 7	; Fault Protection Interrupt Enable
                                 
                                 ; TCCR4C - Timer/Counter 4 Control Register C
                                 .equ	PWM4D	= 0	; Pulse Width Modulator D Enable
                                 .equ	FOC4D	= 1	; Force Output Compare Match 4D
                                 .equ	COM4D0	= 2	; Comparator D Output Mode
                                 .equ	COM4D1	= 3	; Comparator D Output Mode
                                 .equ	COM4B0S	= 4	; Comparator B Output Mode
                                 .equ	COM4B1S	= 5	; Comparator B Output Mode
                                 .equ	COM4A0S	= 6	; Comparator A Output Mode
                                 .equ	COM4A1S	= 7	; Comparator A Output Mode
                                 
                                 ; TCCR4B - Timer/Counter4 Control Register B
                                 .equ	CS40	= 0	; Clock Select Bit 0
                                 .equ	CS41	= 1	; Clock Select Bit 1
                                 .equ	CS42	= 2	; Clock Select Bit 2
                                 .equ	CS43	= 3	; Clock Select Bit 3
                                 .equ	DTPS40	= 4	; Dead Time Prescaler Bit 0
                                 .equ	DTPS41	= 5	; Dead Time Prescaler Bit 1
                                 .equ	PSR4	= 6	; Prescaler Reset Timer/Counter 4
                                 .equ	PWM4X	= 7	; PWM Inversion Mode
                                 
                                 ; TCCR4A - Timer/Counter4 Control Register A
                                 .equ	PWM4B	= 0	; 
                                 .equ	PWM4A	= 1	; 
                                 .equ	FOC4B	= 2	; Force Output Compare Match 4B
                                 .equ	FOC4A	= 3	; Force Output Compare Match 4A
                                 .equ	COM4B0	= 4	; Compare Output Mode 4B, bit 0
                                 .equ	COM4B1	= 5	; Compare Output Mode 4B, bit 1
                                 .equ	COM4A0	= 6	; Compare Output Mode 4A, bit 0
                                 .equ	COM4A1	= 7	; Compare Output Mode 1A, bit 1
                                 
                                 
                                 ; ***** PORTB ************************
                                 ; PORTB - Port B Data Register
                                 .equ	PORTB0	= 0	; Port B Data Register bit 0
                                 .equ	PB0	= 0	; For compatibility
                                 .equ	PORTB1	= 1	; Port B Data Register bit 1
                                 .equ	PB1	= 1	; For compatibility
                                 .equ	PORTB2	= 2	; Port B Data Register bit 2
                                 .equ	PB2	= 2	; For compatibility
                                 .equ	PORTB3	= 3	; Port B Data Register bit 3
                                 .equ	PB3	= 3	; For compatibility
                                 .equ	PORTB4	= 4	; Port B Data Register bit 4
                                 .equ	PB4	= 4	; For compatibility
                                 .equ	PORTB5	= 5	; Port B Data Register bit 5
                                 .equ	PB5	= 5	; For compatibility
                                 .equ	PORTB6	= 6	; Port B Data Register bit 6
                                 .equ	PB6	= 6	; For compatibility
                                 .equ	PORTB7	= 7	; Port B Data Register bit 7
                                 .equ	PB7	= 7	; For compatibility
                                 
                                 ; DDRB - Port B Data Direction Register
                                 .equ	DDB0	= 0	; Port B Data Direction Register bit 0
                                 .equ	DDB1	= 1	; Port B Data Direction Register bit 1
                                 .equ	DDB2	= 2	; Port B Data Direction Register bit 2
                                 .equ	DDB3	= 3	; Port B Data Direction Register bit 3
                                 .equ	DDB4	= 4	; Port B Data Direction Register bit 4
                                 .equ	DDB5	= 5	; Port B Data Direction Register bit 5
                                 .equ	DDB6	= 6	; Port B Data Direction Register bit 6
                                 .equ	DDB7	= 7	; Port B Data Direction Register bit 7
                                 
                                 ; PINB - Port B Input Pins
                                 .equ	PINB0	= 0	; Port B Input Pins bit 0
                                 .equ	PINB1	= 1	; Port B Input Pins bit 1
                                 .equ	PINB2	= 2	; Port B Input Pins bit 2
                                 .equ	PINB3	= 3	; Port B Input Pins bit 3
                                 .equ	PINB4	= 4	; Port B Input Pins bit 4
                                 .equ	PINB5	= 5	; Port B Input Pins bit 5
                                 .equ	PINB6	= 6	; Port B Input Pins bit 6
                                 .equ	PINB7	= 7	; Port B Input Pins bit 7
                                 
                                 
                                 ; ***** PORTC ************************
                                 ; PORTC - Port C Data Register
                                 .equ	PORTC6	= 6	; Port C Data Register bit 6
                                 .equ	PC6	= 6	; For compatibility
                                 .equ	PORTC7	= 7	; Port C Data Register bit 7
                                 .equ	PC7	= 7	; For compatibility
                                 
                                 ; DDRC - Port C Data Direction Register
                                 .equ	DDC6	= 6	; Port C Data Direction Register bit 6
                                 .equ	DDC7	= 7	; Port C Data Direction Register bit 7
                                 
                                 ; PINC - Port C Input Pins
                                 .equ	PINC6	= 6	; Port C Input Pins bit 6
                                 .equ	PINC7	= 7	; Port C Input Pins bit 7
                                 
                                 
                                 ; ***** PORTE ************************
                                 ; PORTE - Data Register, Port E
                                 .equ	PORTE2	= 2	; 
                                 .equ	PE2	= 2	; For compatibility
                                 .equ	PORTE6	= 6	; 
                                 .equ	PE6	= 6	; For compatibility
                                 
                                 ; DDRE - Data Direction Register, Port E
                                 .equ	DDE2	= 2	; 
                                 .equ	DDE6	= 6	; 
                                 
                                 ; PINE - Input Pins, Port E
                                 .equ	PINE2	= 2	; 
                                 .equ	PINE6	= 6	; 
                                 
                                 
                                 ; ***** PORTF ************************
                                 ; PORTF - Data Register, Port F
                                 .equ	PORTF0	= 0	; 
                                 .equ	PF0	= 0	; For compatibility
                                 .equ	PORTF1	= 1	; 
                                 .equ	PF1	= 1	; For compatibility
                                 .equ	PORTF4	= 4	; 
                                 .equ	PF4	= 4	; For compatibility
                                 .equ	PORTF5	= 5	; 
                                 .equ	PF5	= 5	; For compatibility
                                 .equ	PORTF6	= 6	; 
                                 .equ	PF6	= 6	; For compatibility
                                 .equ	PORTF7	= 7	; 
                                 .equ	PF7	= 7	; For compatibility
                                 
                                 ; DDRF - Data Direction Register, Port F
                                 .equ	DDF0	= 0	; 
                                 .equ	DDF1	= 1	; 
                                 .equ	DDF4	= 4	; 
                                 .equ	DDF5	= 5	; 
                                 .equ	DDF6	= 6	; 
                                 .equ	DDF7	= 7	; 
                                 
                                 ; PINF - Input Pins, Port F
                                 .equ	PINF0	= 0	; 
                                 .equ	PINF1	= 1	; 
                                 .equ	PINF4	= 4	; 
                                 .equ	PINF5	= 5	; 
                                 .equ	PINF6	= 6	; 
                                 .equ	PINF7	= 7	; 
                                 
                                 
                                 ; ***** AD_CONVERTER *****************
                                 ; ADMUX - The ADC multiplexer Selection Register
                                 .equ	MUX0	= 0	; Analog Channel and Gain Selection Bits
                                 .equ	MUX1	= 1	; Analog Channel and Gain Selection Bits
                                 .equ	MUX2	= 2	; Analog Channel and Gain Selection Bits
                                 .equ	MUX3	= 3	; Analog Channel and Gain Selection Bits
                                 .equ	MUX4	= 4	; Analog Channel and Gain Selection Bits
                                 .equ	ADLAR	= 5	; Left Adjust Result
                                 .equ	REFS0	= 6	; Reference Selection Bit 0
                                 .equ	REFS1	= 7	; Reference Selection Bit 1
                                 
                                 ; ADCSRA - The ADC Control and Status register
                                 .equ	ADPS0	= 0	; ADC  Prescaler Select Bits
                                 .equ	ADPS1	= 1	; ADC  Prescaler Select Bits
                                 .equ	ADPS2	= 2	; ADC  Prescaler Select Bits
                                 .equ	ADIE	= 3	; ADC Interrupt Enable
                                 .equ	ADIF	= 4	; ADC Interrupt Flag
                                 .equ	ADATE	= 5	; ADC Auto Trigger Enable
                                 .equ	ADSC	= 6	; ADC Start Conversion
                                 .equ	ADEN	= 7	; ADC Enable
                                 
                                 ; ADCH - ADC Data Register High Byte
                                 .equ	ADCH0	= 0	; ADC Data Register High Byte Bit 0
                                 .equ	ADCH1	= 1	; ADC Data Register High Byte Bit 1
                                 .equ	ADCH2	= 2	; ADC Data Register High Byte Bit 2
                                 .equ	ADCH3	= 3	; ADC Data Register High Byte Bit 3
                                 .equ	ADCH4	= 4	; ADC Data Register High Byte Bit 4
                                 .equ	ADCH5	= 5	; ADC Data Register High Byte Bit 5
                                 .equ	ADCH6	= 6	; ADC Data Register High Byte Bit 6
                                 .equ	ADCH7	= 7	; ADC Data Register High Byte Bit 7
                                 
                                 ; ADCL - ADC Data Register Low Byte
                                 .equ	ADCL0	= 0	; ADC Data Register Low Byte Bit 0
                                 .equ	ADCL1	= 1	; ADC Data Register Low Byte Bit 1
                                 .equ	ADCL2	= 2	; ADC Data Register Low Byte Bit 2
                                 .equ	ADCL3	= 3	; ADC Data Register Low Byte Bit 3
                                 .equ	ADCL4	= 4	; ADC Data Register Low Byte Bit 4
                                 .equ	ADCL5	= 5	; ADC Data Register Low Byte Bit 5
                                 .equ	ADCL6	= 6	; ADC Data Register Low Byte Bit 6
                                 .equ	ADCL7	= 7	; ADC Data Register Low Byte Bit 7
                                 
                                 ; ADCSRB - ADC Control and Status Register B
                                 .equ	ADTS0	= 0	; ADC Auto Trigger Source 0
                                 .equ	ADTS1	= 1	; ADC Auto Trigger Source 1
                                 .equ	ADTS2	= 2	; ADC Auto Trigger Source 2
                                 .equ	ADTS3	= 4	; ADC Auto Trigger Source 3
                                 .equ	MUX5	= 5	; Analog Channel and Gain Selection Bits
                                 .equ	ADHSM	= 7	; ADC High Speed Mode
                                 
                                 ; DIDR0 - Digital Input Disable Register 1
                                 .equ	ADC0D	= 0	; ADC0 Digital input Disable
                                 .equ	ADC1D	= 1	; ADC1 Digital input Disable
                                 .equ	ADC2D	= 2	; ADC2 Digital input Disable
                                 .equ	ADC3D	= 3	; ADC3 Digital input Disable
                                 .equ	ADC4D	= 4	; ADC4 Digital input Disable
                                 .equ	ADC5D	= 5	; ADC5 Digital input Disable
                                 .equ	ADC6D	= 6	; ADC6 Digital input Disable
                                 .equ	ADC7D	= 7	; ADC7 Digital input Disable
                                 
                                 ; DIDR2 - Digital Input Disable Register 1
                                 .equ	ADC8D	= 0	; ADC8 Digital input Disable
                                 .equ	ADC9D	= 1	; ADC9 Digital input Disable
                                 .equ	ADC10D	= 2	; ADC10 Digital input Disable
                                 .equ	ADC11D	= 3	; ADC11 Digital input Disable
                                 .equ	ADC12D	= 4	; ADC12 Digital input Disable
                                 .equ	ADC13D	= 5	; ADC13 Digital input Disable
                                 
                                 
                                 ; ***** ANALOG_COMPARATOR ************
                                 ; ADCSRB - ADC Control and Status Register B
                                 .equ	ACME	= 6	; Analog Comparator Multiplexer Enable
                                 
                                 ; ACSR - Analog Comparator Control And Status Register
                                 .equ	ACIS0	= 0	; Analog Comparator Interrupt Mode Select bit 0
                                 .equ	ACIS1	= 1	; Analog Comparator Interrupt Mode Select bit 1
                                 .equ	ACIC	= 2	; Analog Comparator Input Capture Enable
                                 .equ	ACIE	= 3	; Analog Comparator Interrupt Enable
                                 .equ	ACI	= 4	; Analog Comparator Interrupt Flag
                                 .equ	ACO	= 5	; Analog Compare Output
                                 .equ	ACBG	= 6	; Analog Comparator Bandgap Select
                                 .equ	ACD	= 7	; Analog Comparator Disable
                                 
                                 ; DIDR1 - 
                                 .equ	AIN0D	= 0	; AIN0 Digital Input Disable
                                 .equ	AIN1D	= 1	; AIN1 Digital Input Disable
                                 
                                 
                                 ; ***** CPU **************************
                                 ; SREG - Status Register
                                 .equ	SREG_C	= 0	; Carry Flag
                                 .equ	SREG_Z	= 1	; Zero Flag
                                 .equ	SREG_N	= 2	; Negative Flag
                                 .equ	SREG_V	= 3	; Two's Complement Overflow Flag
                                 .equ	SREG_S	= 4	; Sign Bit
                                 .equ	SREG_H	= 5	; Half Carry Flag
                                 .equ	SREG_T	= 6	; Bit Copy Storage
                                 .equ	SREG_I	= 7	; Global Interrupt Enable
                                 
                                 ; MCUCR - MCU Control Register
                                 .equ	IVCE	= 0	; Interrupt Vector Change Enable
                                 .equ	IVSEL	= 1	; Interrupt Vector Select
                                 .equ	PUD	= 4	; Pull-up disable
                                 ;.equ	JTD	= 7	; JTAG Interface Disable
                                 
                                 ; MCUSR - MCU Status Register
                                 .equ	PORF	= 0	; Power-on reset flag
                                 .equ	EXTRF	= 1	; External Reset Flag
                                 .equ	BORF	= 2	; Brown-out Reset Flag
                                 .equ	WDRF	= 3	; Watchdog Reset Flag
                                 ;.equ	JTRF	= 4	; JTAG Reset Flag
                                 
                                 ; OSCCAL - Oscillator Calibration Value
                                 .equ	CAL0	= 0	; Oscillator Calibration Value Bit0
                                 .equ	CAL1	= 1	; Oscillator Calibration Value Bit1
                                 .equ	CAL2	= 2	; Oscillator Calibration Value Bit2
                                 .equ	CAL3	= 3	; Oscillator Calibration Value Bit3
                                 .equ	CAL4	= 4	; Oscillator Calibration Value Bit4
                                 .equ	CAL5	= 5	; Oscillator Calibration Value Bit5
                                 .equ	CAL6	= 6	; Oscillator Calibration Value Bit6
                                 .equ	CAL7	= 7	; Oscillator Calibration Value Bit7
                                 
                                 ; RCCTRL - Oscillator Control Register
                                 .equ	RCFREQ	= 0	; 
                                 
                                 ; CLKPR - 
                                 .equ	CLKPS0	= 0	; 
                                 .equ	CLKPS1	= 1	; 
                                 .equ	CLKPS2	= 2	; 
                                 .equ	CLKPS3	= 3	; 
                                 .equ	CLKPCE	= 7	; 
                                 
                                 ; SMCR - Sleep Mode Control Register
                                 .equ	SE	= 0	; Sleep Enable
                                 .equ	SM0	= 1	; Sleep Mode Select bit 0
                                 .equ	SM1	= 2	; Sleep Mode Select bit 1
                                 .equ	SM2	= 3	; Sleep Mode Select bit 2
                                 
                                 ; EIND - Extended Indirect Register
                                 .equ	EIND0	= 0	; Bit 0
                                 
                                 ; GPIOR2 - General Purpose IO Register 2
                                 .equ	GPIOR20	= 0	; General Purpose IO Register 2 bit 0
                                 .equ	GPIOR21	= 1	; General Purpose IO Register 2 bit 1
                                 .equ	GPIOR22	= 2	; General Purpose IO Register 2 bit 2
                                 .equ	GPIOR23	= 3	; General Purpose IO Register 2 bit 3
                                 .equ	GPIOR24	= 4	; General Purpose IO Register 2 bit 4
                                 .equ	GPIOR25	= 5	; General Purpose IO Register 2 bit 5
                                 .equ	GPIOR26	= 6	; General Purpose IO Register 2 bit 6
                                 .equ	GPIOR27	= 7	; General Purpose IO Register 2 bit 7
                                 
                                 ; GPIOR1 - General Purpose IO Register 1
                                 .equ	GPIOR10	= 0	; General Purpose IO Register 1 bit 0
                                 .equ	GPIOR11	= 1	; General Purpose IO Register 1 bit 1
                                 .equ	GPIOR12	= 2	; General Purpose IO Register 1 bit 2
                                 .equ	GPIOR13	= 3	; General Purpose IO Register 1 bit 3
                                 .equ	GPIOR14	= 4	; General Purpose IO Register 1 bit 4
                                 .equ	GPIOR15	= 5	; General Purpose IO Register 1 bit 5
                                 .equ	GPIOR16	= 6	; General Purpose IO Register 1 bit 6
                                 .equ	GPIOR17	= 7	; General Purpose IO Register 1 bit 7
                                 
                                 ; GPIOR0 - General Purpose IO Register 0
                                 .equ	GPIOR00	= 0	; General Purpose IO Register 0 bit 0
                                 .equ	GPIOR01	= 1	; General Purpose IO Register 0 bit 1
                                 .equ	GPIOR02	= 2	; General Purpose IO Register 0 bit 2
                                 .equ	GPIOR03	= 3	; General Purpose IO Register 0 bit 3
                                 .equ	GPIOR04	= 4	; General Purpose IO Register 0 bit 4
                                 .equ	GPIOR05	= 5	; General Purpose IO Register 0 bit 5
                                 .equ	GPIOR06	= 6	; General Purpose IO Register 0 bit 6
                                 .equ	GPIOR07	= 7	; General Purpose IO Register 0 bit 7
                                 
                                 ; PRR1 - Power Reduction Register1
                                 .equ	PRUSART1	= 0	; Power Reduction USART1
                                 .equ	PRTIM3	= 3	; Power Reduction Timer/Counter3
                                 .equ	PRUSB	= 7	; Power Reduction USB
                                 
                                 ; PRR0 - Power Reduction Register0
                                 .equ	PRADC	= 0	; Power Reduction ADC
                                 .equ	PRUSART0	= 1	; Power Reduction USART
                                 .equ	PRSPI	= 2	; Power Reduction Serial Peripheral Interface
                                 .equ	PRTIM1	= 3	; Power Reduction Timer/Counter1
                                 .equ	PRTIM0	= 5	; Power Reduction Timer/Counter0
                                 .equ	PRTIM2	= 6	; Power Reduction Timer/Counter2
                                 .equ	PRTWI	= 7	; Power Reduction TWI
                                 
                                 ; CLKSTA - 
                                 .equ	EXTON	= 0	; 
                                 .equ	RCON	= 1	; 
                                 
                                 ; CLKSEL0 - 
                                 .equ	CLKS	= 0	; 
                                 .equ	EXTE	= 2	; 
                                 .equ	RCE	= 3	; 
                                 .equ	EXSUT0	= 4	; 
                                 .equ	EXSUT1	= 5	; 
                                 .equ	RCSUT0	= 6	; 
                                 .equ	RCSUT1	= 7	; 
                                 
                                 ; CLKSEL1 - 
                                 .equ	EXCKSEL0	= 0	; 
                                 .equ	EXCKSEL1	= 1	; 
                                 .equ	EXCKSEL2	= 2	; 
                                 .equ	EXCKSEL3	= 3	; 
                                 .equ	RCCKSEL0	= 4	; 
                                 .equ	RCCKSEL1	= 5	; 
                                 .equ	RCCKSEL2	= 6	; 
                                 .equ	RCCKSEL3	= 7	; 
                                 
                                 
                                 ; ***** PLL **************************
                                 ; PLLCSR - PLL Status and Control register
                                 .equ	PLOCK	= 0	; PLL Lock Status Bit
                                 .equ	PLLE	= 1	; PLL Enable Bit
                                 .equ	PINDIV	= 4	; PLL prescaler Bit 2
                                 
                                 ; PLLFRQ - PLL Frequency Control Register
                                 .equ	PDIV0	= 0	; 
                                 .equ	PDIV1	= 1	; 
                                 .equ	PDIV2	= 2	; 
                                 .equ	PDIV3	= 3	; 
                                 .equ	PLLTM0	= 4	; 
                                 .equ	PLLTM1	= 5	; 
                                 .equ	PLLUSB	= 6	; 
                                 .equ	PINMUX	= 7	; 
                                 
                                 
                                 ; ***** USB_DEVICE *******************
                                 ; USBCON - USB General Control Register
                                 .equ	VBUSTE	= 0	; 
                                 .equ	OTGPADE	= 4	; 
                                 .equ	FRZCLK	= 5	; 
                                 .equ	USBE	= 7	; 
                                 
                                 ; UDCON - 
                                 .equ	DETACH	= 0	; 
                                 .equ	RMWKUP	= 1	; 
                                 .equ	LSM	= 2	; USB low speed mode
                                 .equ	RSTCPU	= 3	; 
                                 
                                 ; UDINT - 
                                 .equ	SUSPI	= 0	; 
                                 .equ	SOFI	= 2	; 
                                 .equ	EORSTI	= 3	; 
                                 .equ	WAKEUPI	= 4	; 
                                 .equ	EORSMI	= 5	; 
                                 .equ	UPRSMI	= 6	; 
                                 
                                 ; UDIEN - 
                                 .equ	SUSPE	= 0	; 
                                 .equ	SOFE	= 2	; 
                                 .equ	EORSTE	= 3	; 
                                 .equ	WAKEUPE	= 4	; 
                                 .equ	EORSME	= 5	; 
                                 .equ	UPRSME	= 6	; 
                                 
                                 ; UDADDR - 
                                 .equ	UADD0	= 0	; 
                                 .equ	UADD1	= 1	; 
                                 .equ	UADD2	= 2	; 
                                 .equ	UADD3	= 3	; 
                                 .equ	UADD4	= 4	; 
                                 .equ	UADD5	= 5	; 
                                 .equ	UADD6	= 6	; 
                                 .equ	ADDEN	= 7	; 
                                 
                                 ; UDFNUML - 
                                 .equ	FNUM0	= 0	; 
                                 .equ	FNUM1	= 1	; 
                                 .equ	FNUM2	= 2	; 
                                 .equ	FNUM3	= 3	; 
                                 .equ	FNUM4	= 4	; 
                                 .equ	FNUM5	= 5	; 
                                 .equ	FNUM6	= 6	; 
                                 .equ	FNUM7	= 7	; 
                                 
                                 ; UDFNUMH - 
                                 .equ	FNUM8	= 0	; 
                                 .equ	FNUM9	= 1	; 
                                 .equ	FNUM10	= 2	; 
                                 
                                 ; UDMFN - 
                                 .equ	FNCERR	= 4	; 
                                 
                                 ; UEINTX - 
                                 .equ	TXINI	= 0	; 
                                 .equ	STALLEDI	= 1	; 
                                 .equ	RXOUTI	= 2	; 
                                 .equ	RXSTPI	= 3	; 
                                 .equ	NAKOUTI	= 4	; 
                                 .equ	RWAL	= 5	; 
                                 .equ	NAKINI	= 6	; 
                                 .equ	FIFOCON	= 7	; 
                                 
                                 ; UENUM - 
                                 .equ	UENUM_0	= 0	; 
                                 .equ	UENUM_1	= 1	; 
                                 .equ	UENUM_2	= 2	; 
                                 
                                 ; UERST - 
                                 .equ	EPRST0	= 0	; 
                                 .equ	EPRST1	= 1	; 
                                 .equ	EPRST2	= 2	; 
                                 .equ	EPRST3	= 3	; 
                                 .equ	EPRST4	= 4	; 
                                 .equ	EPRST5	= 5	; 
                                 .equ	EPRST6	= 6	; 
                                 
                                 ; UECONX - 
                                 .equ	EPEN	= 0	; 
                                 .equ	RSTDT	= 3	; 
                                 .equ	STALLRQC	= 4	; 
                                 .equ	STALLRQ	= 5	; 
                                 
                                 ; UECFG0X - 
                                 .equ	EPDIR	= 0	; 
                                 .equ	EPTYPE0	= 6	; 
                                 .equ	EPTYPE1	= 7	; 
                                 
                                 ; UECFG1X - 
                                 .equ	ALLOC	= 1	; 
                                 .equ	EPBK0	= 2	; 
                                 .equ	EPBK1	= 3	; 
                                 .equ	EPSIZE0	= 4	; 
                                 .equ	EPSIZE1	= 5	; 
                                 .equ	EPSIZE2	= 6	; 
                                 
                                 ; UESTA0X - 
                                 .equ	NBUSYBK0	= 0	; 
                                 .equ	NBUSYBK1	= 1	; 
                                 .equ	DTSEQ0	= 2	; 
                                 .equ	DTSEQ1	= 3	; 
                                 .equ	UNDERFI	= 5	; 
                                 .equ	OVERFI	= 6	; 
                                 .equ	CFGOK	= 7	; 
                                 
                                 ; UESTA1X - 
                                 .equ	CURRBK0	= 0	; 
                                 .equ	CURRBK1	= 1	; 
                                 .equ	CTRLDIR	= 2	; 
                                 
                                 ; UEIENX - 
                                 .equ	TXINE	= 0	; 
                                 .equ	STALLEDE	= 1	; 
                                 .equ	RXOUTE	= 2	; 
                                 .equ	RXSTPE	= 3	; 
                                 .equ	NAKOUTE	= 4	; 
                                 .equ	NAKINE	= 6	; 
                                 .equ	FLERRE	= 7	; 
                                 
                                 ; UEDATX - 
                                 .equ	DAT0	= 0	; 
                                 .equ	DAT1	= 1	; 
                                 .equ	DAT2	= 2	; 
                                 .equ	DAT3	= 3	; 
                                 .equ	DAT4	= 4	; 
                                 .equ	DAT5	= 5	; 
                                 .equ	DAT6	= 6	; 
                                 .equ	DAT7	= 7	; 
                                 
                                 ; UEBCLX - 
                                 .equ	BYCT0	= 0	; 
                                 .equ	BYCT1	= 1	; 
                                 .equ	BYCT2	= 2	; 
                                 .equ	BYCT3	= 3	; 
                                 .equ	BYCT4	= 4	; 
                                 .equ	BYCT5	= 5	; 
                                 .equ	BYCT6	= 6	; 
                                 .equ	BYCT7	= 7	; 
                                 
                                 ; UEINT - 
                                 .equ	EPINT0	= 0	; 
                                 .equ	EPINT1	= 1	; 
                                 .equ	EPINT2	= 2	; 
                                 .equ	EPINT3	= 3	; 
                                 .equ	EPINT4	= 4	; 
                                 .equ	EPINT5	= 5	; 
                                 .equ	EPINT6	= 6	; 
                                 
                                 ; USBINT - 
                                 .equ	VBUSTI	= 0	; 
                                 
                                 ; USBSTA - 
                                 .equ	VBUS	= 0	; 
                                 .equ	SPEED	= 3	; 
                                 
                                 ; USBCON - USB General Control Register
                                 ;.equ	VBUSTE	= 0	; 
                                 ;.equ	OTGPADE	= 4	; 
                                 ;.equ	FRZCLK	= 5	; 
                                 ;.equ	USBE	= 7	; 
                                 
                                 ; UHWCON - 
                                 .equ	UVREGE	= 0	; 
                                 
                                 ; TWCR - Two-Wire Interface Control
                                 .equ		TWIE	= 0	;
                                 .equ 		TWEN	= 2	;
                                 .equ 		TWWC	= 3	;
                                 .equ 		TWSTO	= 4	;
                                 .equ 		TWSTA	= 5	;
                                 .equ 		TWEA	= 6	;
                                 .equ 		TWINT	= 7	;
                                 
                                 ; TWSR - Two-Wire Status
                                 .equ 		TWPS0	= 0	;
                                 .equ 		TWPS1	= 1	;
                                 
                                 ; TWAR
                                 .equ 		TWGCE	= 0	;
                                 
                                 
                                 ; ***** LOCKSBITS ********************************************************
                                 .equ	LB1	= 0	; Lock bit
                                 .equ	LB2	= 1	; Lock bit
                                 .equ	BLB01	= 2	; Boot Lock bit
                                 .equ	BLB02	= 3	; Boot Lock bit
                                 .equ	BLB11	= 4	; Boot lock bit
                                 .equ	BLB12	= 5	; Boot lock bit
                                 
                                 
                                 ; ***** FUSES ************************************************************
                                 ; LOW fuse bits
                                 .equ	CKSEL0	= 0	; Select Clock Source
                                 .equ	CKSEL1	= 1	; Select Clock Source
                                 .equ	CKSEL2	= 2	; Select Clock Source
                                 .equ	CKSEL3	= 3	; Select Clock Source
                                 .equ	SUT0	= 4	; Select start-up time
                                 .equ	SUT1	= 5	; Select start-up time
                                 .equ	CKOUT	= 6	; Oscillator options
                                 .equ	CKDIV8	= 7	; Divide clock by 8
                                 
                                 ; HIGH fuse bits
                                 .equ	BOOTRST	= 0	; Select Reset Vector
                                 .equ	BOOTSZ0	= 1	; Select Boot Size
                                 .equ	BOOTSZ1	= 2	; Select Boot Size
                                 .equ	EESAVE	= 3	; EEPROM memory is preserved through chip erase
                                 .equ	WDTON	= 4	; Watchdog timer always on
                                 .equ	SPIEN	= 5	; Enable Serial programming and Data Downloading
                                 .equ	JTAGEN	= 6	; Enable JTAG
                                 .equ	OCDEN	= 7	; Enable OCD
                                 
                                 ; EXTENDED fuse bits
                                 .equ	BODLEVEL0	= 0	; Brown-out Detector trigger level
                                 .equ	BODLEVEL1	= 1	; Brown-out Detector trigger level
                                 .equ	BODLEVEL2	= 2	; Brown-out Detector trigger level
                                 .equ	HWBE	= 3	; Hardware Boot Enable
                                 
                                 
                                 
                                 ; ***** CPU REGISTER DEFINITIONS *****************************************
                                 .def	XH	= r27
                                 .def	XL	= r26
                                 .def	YH	= r29
                                 .def	YL	= r28
                                 .def	ZH	= r31
                                 .def	ZL	= r30
                                 
                                 
                                 
                                 ; ***** DATA MEMORY DECLARATIONS *****************************************
                                 .equ	FLASHEND	= 0x3fff	; Note: Word address
                                 .equ	IOEND	= 0x00ff
                                 .equ	SRAM_START	= 0x0100
                                 .equ	SRAM_SIZE	= 2560
                                 .equ	RAMEND	= 0x0aff
                                 .equ	XRAMEND	= 0x0000
                                 .equ	E2END	= 0x03ff
                                 .equ	EEPROMEND	= 0x03ff
                                 .equ	EEADRBITS	= 10
                                 #pragma AVRPART MEMORY PROG_FLASH 32768
                                 #pragma AVRPART MEMORY EEPROM 1024
                                 #pragma AVRPART MEMORY INT_SRAM SIZE 2560
                                 #pragma AVRPART MEMORY INT_SRAM START_ADDR 0x100
                                 
                                 
                                 
                                 ; ***** BOOTLOADER DECLARATIONS ******************************************
                                 .equ	NRWW_START_ADDR	= 0x3800
                                 .equ	NRWW_STOP_ADDR	= 0x3fff
                                 .equ	RWW_START_ADDR	= 0x0
                                 .equ	RWW_STOP_ADDR	= 0x37ff
                                 .equ	PAGESIZE	= 64
                                 .equ	FIRSTBOOTSTART	= 0x3f00
                                 .equ	SECONDBOOTSTART	= 0x3e00
                                 .equ	THIRDBOOTSTART	= 0x3c00
                                 .equ	FOURTHBOOTSTART	= 0x3800
                                 .equ	SMALLBOOTSTART	= FIRSTBOOTSTART
                                 .equ	LARGEBOOTSTART	= FOURTHBOOTSTART
                                 
                                 
                                 
                                 ; ***** INTERRUPT VECTORS ************************************************
                                 .equ	INT0addr	= 0x0002	; External Interrupt Request 0
                                 .equ	INT1addr	= 0x0004	; External Interrupt Request 1
                                 .equ	INT2addr	= 0x0006	; External Interrupt Request 2
                                 .equ	INT3addr	= 0x0008	; External Interrupt Request 3
                                 .equ	Reserved1addr	= 0x000a	; Reserved1
                                 .equ	Reserved2addr	= 0x000c	; Reserved2
                                 .equ	INT6addr	= 0x000e	; External Interrupt Request 6
                                 .equ	Reserved3addr	= 0x0010	; Reserved3
                                 .equ	PCI0addr	= 0x0012	; Pin Change Interrupt Request 0
                                 .equ	USB_GENaddr	= 0x0014	; USB General Interrupt Request
                                 .equ	USB_COMaddr	= 0x0016	; USB Endpoint/Pipe Interrupt Communication Request
                                 .equ	WDTaddr	= 0x0018	; Watchdog Time-out Interrupt
                                 .equ	Reserved4addr	= 0x001a	; Reserved4
                                 .equ	Reserved5addr	= 0x001c	; Reserved5
                                 .equ	Reserved6addr	= 0x001e	; Reserved6
                                 .equ	ICP1addr	= 0x0020	; Timer/Counter1 Capture Event
                                 .equ	OC1Aaddr	= 0x0022	; Timer/Counter1 Compare Match A
                                 .equ	OC1Baddr	= 0x0024	; Timer/Counter1 Compare Match B
                                 .equ	OC1Caddr	= 0x0026	; Timer/Counter1 Compare Match C
                                 .equ	OVF1addr	= 0x0028	; Timer/Counter1 Overflow
                                 .equ	OC0Aaddr	= 0x002a	; Timer/Counter0 Compare Match A
                                 .equ	OC0Baddr	= 0x002c	; Timer/Counter0 Compare Match B
                                 .equ	OVF0addr	= 0x002e	; Timer/Counter0 Overflow
                                 .equ	SPIaddr	= 0x0030	; SPI Serial Transfer Complete
                                 .equ	URXC1addr	= 0x0032	; USART1, Rx Complete
                                 .equ	UDRE1addr	= 0x0034	; USART1 Data register Empty
                                 .equ	UTXC1addr	= 0x0036	; USART1, Tx Complete
                                 .equ	ACIaddr	= 0x0038	; Analog Comparator
                                 .equ	ADCCaddr	= 0x003a	; ADC Conversion Complete
                                 .equ	ERDYaddr	= 0x003c	; EEPROM Ready
                                 .equ	ICP3addr	= 0x003e	; Timer/Counter3 Capture Event
                                 .equ	OC3Aaddr	= 0x0040	; Timer/Counter3 Compare Match A
                                 .equ	OC3Baddr	= 0x0042	; Timer/Counter3 Compare Match B
                                 .equ	OC3Caddr	= 0x0044	; Timer/Counter3 Compare Match C
                                 .equ	OVF3addr	= 0x0046	; Timer/Counter3 Overflow
                                 .equ	TWIaddr	= 0x0048	; 2-wire Serial Interface
                                 .equ	SPMRaddr	= 0x004a	; Store Program Memory Read
                                 .equ	OC4Aaddr	= 0x004c	; Timer/Counter4 Compare Match A
                                 .equ	OC4Baddr	= 0x004e	; Timer/Counter4 Compare Match B
                                 .equ	OC4Daddr	= 0x0050	; Timer/Counter4 Compare Match D
                                 .equ	OVF4addr	= 0x0052	; Timer/Counter4 Overflow
                                 .equ	TIMER4_FPFaddr	= 0x0054	; Timer/Counter4 Fault Protection Interrupt
                                 
                                 .equ	INT_VECTORS_SIZE	= 86	; size in words
                                 
                                 #endif  /* _M32U4DEF_INC_ */
                                 
                                 ; ***** END OF FILE ******************************************************
                                 
                                 ; Lab3.asm
                                 ;
                                 ; Created: 2024-12-04 13:15:56
                                 ; Author : aq3915
                                 ;
                                 
                                 ;==============================================================================
                                 ; Definitions of registers, etc. ("constants")
                                 ;==============================================================================
                                 	.EQU RESET		= 0x0000
                                 	.EQU PM_START	= 0x0056
                                 	.DEF TEMP		= R16
                                 	.DEF RVAL		= R24
                                 	.EQU NO_KEY		= 0x0F
                                 	.EQU ROLL_KEY	= 0x32
                                 	.EQU STAT_KEY	= 0x33
                                 
                                 ;==============================================================================
                                 ; Start of program
                                 ;==============================================================================
                                 	.CSEG
                                 	.ORG RESET
000000 c23f                      	RJMP init
                                 
                                 	.ORG PM_START
                                 
                                 	.INCLUDE "delay.inc"
                                 
                                  * delay.inc
                                  *
                                  * Author:	?????
                                  *
                                  * Date:	2014-??-??
                                  */ 
                                 
                                 ;==============================================================================
                                 ; Delay of 1 s (including RCALL)
                                 ;==============================================================================
                                 delay_1_micros:   /* UPPGIFT: komplettera med ett antal NOP-instruktioner!!! */
000056 0000                      	NOP
000057 0000                      	NOP
000058 0000                      	NOP
000059 0000                      	NOP
00005a 0000                      	NOP
00005b 0000                      	NOP
00005c 0000                      	NOP
00005d 0000                      	NOP
00005e 9508                      	RET
                                 
                                 ;==============================================================================
                                 ; Delay of X s
                                 ;	LDI + RCALL = 4 cycles
                                 ;==============================================================================
                                 delay_micros:/* UPPGIFT: komplettera med ett antal NOP-instruktioner!!! */
00005f 0000                      	NOP
000060 0000                      	NOP
000061 0000                      	NOP
000062 0000                      	NOP
000063 0000                      	NOP
000064 0000                      	NOP
000065 0000                      	NOP
000066 0000                      	NOP
000067 957a                      	DEC R23				; 1 cycle
000068 3070                      	CPI R23, 0			; more loops to do? 1 cycle
000069 f7a9                      	BRNE delay_micros	;	continue!
00006a 9508                      	RET
                                 
                                 ;==============================================================================
                                 ; Delay of X ms
                                 ;	LDI + RCALL = 4 cycles
                                 ;==============================================================================
                                 delay_ms:
00006b 2f28                      	MOV R18, R24
                                 loop_dms:
00006c ef8a                      	LDI R24, 250
00006d dff1                      	RCALL delay_micros
00006e ef8a                      	LDI R24, 250
00006f dfef                      	RCALL delay_micros
000070 ef8a                      	LDI R24, 250
000071 dfed                      	RCALL delay_micros
000072 ef8a                      	LDI R24, 250
000073 dfeb                      	RCALL delay_micros
000074 952a                      	DEC R18
000075 3020                      	CPI R18, 0			; more loops to do?
000076 f7a9                      	BRNE loop_dms		;	continue!
000077 9508                      	RET
                                 
                                 delay_1_s:
000078 ef8a                      	LDI R24, 250
000079 dff1                      	RCALL delay_ms
00007a ef8a                      	LDI R24, 250
00007b dfef                      	RCALL delay_ms
00007c ef8a                      	LDI R24, 250
00007d dfed                      	RCALL delay_ms
00007e ef8a                      	LDI R24, 250
00007f dfeb                      	RCALL delay_ms
                                 	.INCLUDE "lcd.inc"
000080 9508                      
                                  * lcd.inc
                                  * This file contains subroutines for communicating with a Hitachi HD44780
                                  * LCD controller (or compatible circuit).
                                  * These subroutines are created for the course Datateknik DA215A at
                                  * Malmo University.
                                  *
                                  * Author:	Mathias Beckius
                                  *
                                  * Date:	2014-11-24
                                  */
                                 
                                  ;==============================================================================
                                  ; Defines of ports and pins used by the LCD
                                  ;==============================================================================
                                 	.EQU E_PORT		= PORTD		; port for Enable pin
                                 	.EQU E			= 7			; Enable pin, bit 7
                                 	.EQU RS_PORT	= PORTD		; port for RS pind
                                  	.EQU RS			= 6			; RS pin, bit 6
                                 	.EQU D_PORT		= PORTF		; port for data/instructions
000081 6557
000082 636c
000083 6d6f
000084 2165
000085 0000                      	Str_1: .DB "Welcome!",0,0
                                 ;==============================================================================
                                 ; Write the most significant nibble (of the content in R24) to the LCD.
                                 ;==============================================================================
                                 lcd_write_nibble:
000086 bb81                      	OUT	D_PORT, R24			; write data
000087 9a5f                      	SBI	E_PORT, E			; set Enable pin for...
000088 dfcd                      	RCALL delay_1_micros	; ...1 s!
000089 985f                      	CBI	E_PORT, E			; clear Enable pin
00008a 9508                      	RET
                                 
                                 lcd_clear_display:
00008b 985e                      	CBI	RS_PORT, RS			; select Instruction Register
00008c e081                      	LDI	R24, 0x01
00008d d001                      	RCALL lcd_write_instr
00008e 9508                      	RET
                                 ;==============================================================================
                                 ; Write to the Instruction Register.
                                 ; Instruction is stored in R24.
                                 ; A minimum of 39 s delay must be generated after each instruction!
                                 ;==============================================================================
                                 lcd_write_instr:
00008f 985e                      	CBI	RS_PORT, RS			; select Instruction Register
000090 dff5                      	RCALL lcd_write_nibble	; write MSB's
000091 9582                      	SWAP R24
000092 dff3                      	RCALL lcd_write_nibble	; write LSB's
000093 e28d                      	LDI R24, 45
000094 dfca                      	RCALL delay_micros
000095 9508                      	RET
                                 
                                 lcd_print_string:
                                 	Nxt1:
000096 9185                      	LPM R24, Z+
000097 3080                      	CPI R24, 0x0
000098 f011                      	BREQ END
000099 d002                      	RCALL lcd_write_chr
00009a cffb                      	RJMP Nxt1
                                 	END:
00009b 9508                      	RET
                                 
                                 .MACRO PRINTSTRING
                                 	LDI ZH, high(@0<<1)
                                 	LDI ZL, low(@0<<1)
                                 	RCALL lcd_print_string
                                 .ENDMACRO
                                 
                                 ;==============================================================================
                                 ; Write a character to the Data Register.
                                 ; Character is stored in R24.
                                 ; After the character has been written, a delay of 43 s is generated! 
                                 ;==============================================================================
                                 lcd_write_chr:
00009c 9a5e                      	SBI RS_PORT, RS			; select Data Register
00009d dfe8                      	RCALL lcd_write_nibble	; write MSB's
00009e 9582                      	SWAP R24
00009f dfe6                      	RCALL lcd_write_nibble	; write LSB's
0000a0 e28d                      	LDI R24, 45
0000a1 dfbd                      	RCALL delay_micros
0000a2 9508                      	RET
                                 
                                 .MACRO LCD_WRITE_CHAR
                                 	LDI R24, @0
                                 	RCALL lcd_write_chr
                                 .ENDMACRO
                                 ;==============================================================================
                                 ; Initialize the LCD.
                                 ;==============================================================================
                                 lcd_init:		
0000a3 e184                      	LDI	R24, 20				; wait more than 15 ms after power-up!
0000a4 dfc6                      	RCALL delay_ms
0000a5 985e                      	CBI	RS_PORT, RS			; select Instruction Register
0000a6 e380                      	LDI	R24, 0x30			; Function Set: 8 bit data interface
0000a7 dfde                      	RCALL lcd_write_nibble
0000a8 e08a                      	LDI	R24, 10				; wait 10 ms
0000a9 dfc1                      	RCALL delay_ms
0000aa e380                      	LDI	R24, 0x30			; Function Set: 8 bit data interface
0000ab dfda                      	RCALL lcd_write_nibble
0000ac e08a                      	LDI	R24, 10				; wait 10 ms
0000ad dfbd                      	RCALL delay_ms
0000ae e380                      	LDI	R24, 0x30			; Function Set: 8 bit data interface
0000af dfd6                      	RCALL lcd_write_nibble
0000b0 e08a                      	LDI	R24, 10				; wait 10 ms
0000b1 dfb9                      	RCALL delay_ms
                                 
0000b2 e280                      	LDI	R24, 0x20			; Function Set: switch to 4 bit data interface
0000b3 dfd2                      	RCALL lcd_write_nibble
0000b4 e28d                      	LDI R24, 45				; must be followed by a minimum
0000b5 dfa9                      	RCALL delay_micros		; delay of 39 s
                                 
0000b6 e288                      	LDI	R24, 0x28			; Function Set: 4 bit data interface, 2 lines,
0000b7 dfd7                      	RCALL lcd_write_instr	;				Font 5x10
                                 
0000b8 e08f                      	LDI	R24, 0x0F	; Display on, Cursor On
0000b9 dfd5                      	RCALL lcd_write_instr
                                 
0000ba e081                      	LDI	R24, 0x01			; Clear Display
0000bb dfd3                      	RCALL lcd_write_instr
0000bc e082                      	LDI	R24, 2				; must be followed by a minimum
0000bd dfad                      	RCALL delay_ms			; delay of 1.53 ms
                                 
0000be e086                      	LDI R24, 0x06			; Entry Mode Set: incremental cursor movement,
0000bf dfcf                      	RCALL lcd_write_instr	;				  no display shift
                                 	.INCLUDE "keyboard.inc"
0000c0 9508                      
                                  * keyboard.inc
                                  *
                                  *  Created: 2024-12-04 13:19:14
                                  *   Author: aq3915
                                  */ 
                                 read_keyboard_num:
0000c1 e020                      	LDI R18, 0				; reset counter
                                 scan_key:	
0000c2 2f32                      	MOV R19, R18			;Copy R18 to R19
0000c3 0f33                      	LSL R19			
0000c4 0f33                      	LSL R19
0000c5 0f33                      	LSL R19
0000c6 0f33                      	LSL R19					;Shift left 4 times 00001111 - 11110000
0000c7 b935                      	OUT PORTB, R19
0000c8 932f                      	PUSH R18			; set column and row
0000c9 e08a                      	LDI R24, 10
0000ca dfa0                      	RCALL delay_ms
0000cb 912f                      	POP R18
0000cc 9966                      	SBIC PINE, 6			; IF PIN6 is low skip next line
0000cd c004                      	RJMP return_key_val		; JUMP return_key_val
0000ce 9523                      	INC R18					; Increase R18 - Column
0000cf 302c                      	CPI R18, 12				; Compare R18 with 12
0000d0 f789                      	BRNE scan_key			; If not equal jump to scan_key else (all rows and collums has been checked)
0000d1 e02f                      	LDI R18, NO_KEY		; no key was pressed!
                                 return_key_val:
0000d2 2f82                      	MOV RVAL, R18		;sets rval to value of R18
0000d3 9508                      	RET	
                                 
                                 to_ASCII:
0000d4 e0f4                      	LDI ZH, high(map_table <<1) ;Initialize Z pointer
0000d5 e5e6                      	LDI ZL, low(map_table <<1)
0000d6 0fe8                      	ADD ZL, RVAL ;Add index
0000d7 e080                      	LDI RVAL, 0x00
0000d8 1ff8                      	ADC ZH, RVAL ;Add 0 to catch Carry, if present
0000d9 9184                      	LPM RVAL, Z
0000da 9508                      	RET
                                 
                                 read_keyboard:
0000db dfe5                      	RCALL read_keyboard_num
0000dc dff7                      	RCALL to_ASCII
                                 	.INCLUDE "Tarning.inc"
0000dd 9508                      
                                  * Tarning.inc
                                  *
                                  *  Created: 2024-12-04 15:49:59
                                  *   Author: aq3915
                                  */ 
                                 
                                 
                                 
                                 roll_dice:
0000de e006                      	LDI R16, 6				;dice have 6 values
                                 test: 
0000df 0000                      	NOP
0000e0 0000                      	NOP
0000e1 dff9                      	RCALL read_keyboard		;key-value in RVAL
0000e2 3382                      	CPI RVAL, ROLL_KEY
0000e3 f009                      	BREQ roll				;yes, key 1 is still pressed
0000e4 9508                      	RET						;no, key is released
                                 roll: 
0000e5 950a                      	DEC R16					;start cycle count here
0000e6 f3b9                      	BREQ roll_dice			;R16 is zero?, start agn at 6
0000e7 cff7                      	RJMP test				;no, keep rolling
                                 	
                                 
                                 	.INCLUDE "stat_data.inc"
                                 
                                  * stat_data.inc
                                  *
                                  *  Created: 2024-12-04 16:44:57
                                  *   Author: aq3915
                                  */ 
                                  /* ----------------------------------------------------------------
                                 DESCRIPTION
                                 Space in the RAM to save the results from dice throws.
                                 The following functions are provided below:
                                 store_stat (R24 contains the dice value)
                                 The function will increment the
                                 Total number of throws and the
                                 number of throws with results equals R24.
                                 get_stat (R24 gives the value for which the
                                 result is retrieved. If R24 = 0, the
                                 total number of throws shall be returned.
                                 The result is returned in R24.
                                 clear_stat (no parameters in nor out)
                                 Clears all data.
                                 ------------------------------------------------------------------*/
                                 .DSEG ; The following applies to the RAM:
                                 .ORG 0x100 ; Set starting
                                 ; address of data
                                 ; segment to 0x100
000100                           rolls:	.BYTE 7
                                 
                                 .CSEG
                                 
                                 store_stat:
0000e8 e0b1                      	LDI XH, high(rolls)
0000e9 e0a0                      	LDI XL, low(rolls)
0000ea 90fc                      	LD R15, X
0000eb 94f3                      	INC R15
0000ec 92fc                      	ST X, R15
                                 
0000ed 0fa0                      	ADD XL, R16
0000ee 918c                      	LD R24, X
0000ef 9583                      	INC R24
0000f0 938c                      	ST X, R24
                                 
0000f1 9508                      	RET
                                 
                                 get_stat: 
0000f2 e0b1                      	LDI XH, high(rolls)
0000f3 e0a0                      	LDI XL, low(rolls)
                                 
0000f4 0fa8                      	ADD XL, R24
0000f5 e080                      	LDI R24, 0x0
0000f6 1fb8                      	ADC XH, R24
                                 
0000f7 918c                      	LD R24, X       
                                 	      
0000f8 9508                      	RET
                                 clear_stat:
0000f9 e000                      	LDI R16, 0
0000fa 9300 0100                 	STS rolls, R16
0000fc 9300 0101                 	STS rolls+1, R16
0000fe 9300 0102                 	STS rolls+2, R16
000100 9300 0103                 	STS rolls+3, R16
000102 9300 0104                 	STS rolls+4, R16
000104 9300 0105                 	STS rolls+5, R16
000106 9300 0106                 	STS rolls+6, R16
                                 	.INCLUDE "stats.inc"
000108 9508                      
                                  * stats.inc
                                  *
                                  *  Created: 2016-11-16 20:03:40
                                  *   Author: Magnus Krampell
                                  */ 
                                 
                                 
                                 clearstring:
000109 6c43
00010a 6165
00010b 6972
00010c 676e
00010d 2e2e
00010e 002e                      	.DB "Clearing...",0 
                                 totalstring:
00010f 6f54
000110 6174
000111 3a6c
000112 0020                      	.DB "Total: ",0
                                 countones:
000113 2023
000114 2731
000115 3a73
000116 0020                      	.DB "# 1's: ",0
                                 counttwos:
000117 2023
000118 2732
000119 3a73
00011a 0020                      	.DB "# 2's: ",0
                                 countthrees:
00011b 2023
00011c 2733
00011d 3a73
00011e 0020                      	.DB "# 3's: ",0
                                 countfours:
00011f 2023
000120 2734
000121 3a73
000122 0020                      	.DB "# 4's: ",0
                                 countfives:
000123 2023
000124 2735
000125 3a73
000126 0020                      	.DB "# 5's: ",0
                                 countsixs:
000127 2023
000128 2736
000129 3a73
00012a 0020                      	.DB "# 6's: ",0
                                 
                                 
                                 ; init statistics module
                                 init_stat:
00012b dfcd                      	RCALL clear_stat	; clear data structure
00012c 9508                      	RET
                                 
                                 ; print content of RVAL on display
                                 
00012d 3130
00012e 3332
00012f 3534
000130 3736
000131 3938
000132 4241
000133 4443
000134 4645                      hexconv: .DB "0123456789ABCDEF"
                                 printhex:
000135 e0f2                      	LDI		ZH, HIGH(hexconv<<1)
000136 e5ea                      	LDI		ZL, LOW(hexconv<<1)
000137 2e58                      	MOV		R5, RVAL		; save content
000138 9582                      	SWAP	RVAL			; 
000139 708f                      	ANDI	RVAL, 0x0F		; mask out low nibble
00013a 0fe8                      	ADD		ZL, RVAL
00013b 2466                      	CLR		R6
00013c 1df6                      	ADC		ZH, R6			; handle carry, if needed		
00013d 9184                      	LPM		RVAL, Z			; convert number to ASCII
00013e df5d                      	RCALL	lcd_write_chr	; write to LCD
00013f 2d85                      	MOV		RVAL, R5		; retrieve content
000140 708f                      	ANDI	RVAL, 0x0F		; mask out low nibble
000141 e5ea                      	LDI		ZL, LOW(hexconv<<1) ; reset ZL to start
000142 e0f2                      	LDI		ZH, HIGH(hexconv<<1)
000143 0fe8                      	ADD		ZL, RVAL
000144 2466                      	CLR		R6
000145 1df6                      	ADC		ZH, R6			; handle carry, if needed		
000146 9184                      	LPM		RVAL, Z			; convert number to ASCII
000147 df54                      	RCALL lcd_write_chr		; write to LCD
000148 9508                      	RET
                                 
                                 
                                 		/* print the content of RVAL as a decimal number 0-255
                                 	Uses R16, R17, R20, R24/RVAL
                                 
                                 	Test for 200+ and 100+ separately. For numbers 10-99, loop nad count number of 
                                 	times 10 can be substracted. Use 2 registers to avoid myltiplication
                                 	Finally, print single number 0-9
                                 	*/
                                 
                                 printdecimal:
000149 2f48                      	MOV R20, RVAL			; save value
00014a 3c48                      	CPI R20, 200			; >200?
00014b f020                      	BRLO no200				; no
00014c e382                      	LDI R24, '2'			; yes, print...
00014d df4e                      	RCALL lcd_write_chr	; ...nunber starting with 2
00014e 5c48                      	SUBI R20, 200			; number is now 0-55
00014f c008                      	RJMP tens				; 
                                 
                                 no200:
000150 3644                      	CPI R20, 100			; >100?
000151 f020                      	BRLO no100				; no
000152 e381                      	LDI R24, '1'			; yes, print...
000153 df48                      	RCALL lcd_write_chr	; ...nunber starting with 1
000154 5644                      	SUBI R20, 100			; number is now 0-99
000155 c002                      	RJMP tens				; 
                                 
                                 no100:
000156 e380                      	LDI R24, '0'			; print leading 0
000157 df44                      	RCALL lcd_write_chr	; ...nunber starting with 1
                                 
                                 tens:
000158 e001                      	LDI R16, 1				; first decade
000159 e01a                      	LDI R17, 10				; no need to multiply R16 by 10, instead use another register
                                 	
                                 nextten:
00015a 9488                      	CLC
00015b 1741                      	CP R20, R17				; remove R16*10 from number
00015c f018                      	BRCS ones				; have we reached 0?
                                 
00015d 9503                      	INC R16					; no, next decade
00015e 5f16                      	SUBI R17, -10			; add another 10
00015f cffa                      	RJMP nextten			; try next
                                 
                                 ones:
000160 501a                      	SUBI R17, 10			; R17 was now too much, back by 10
000161 1b41                      	SUB R20, R17			; remove from R20, to only keep 0-9
000162 934f                      	PUSH R20				; save, in case R20 is used somewhere
                                 
000163 950a                      	DEC R16					; R16 was also one step too large...
000164 2f80                      	MOV R24, R16			; number of tens to print
000165 5d80                      	SUBI R24, -48			; convert to ASCII
000166 df35                      	RCALL lcd_write_chr
000167 918f                      	POP R24					; get number, now 0-9 to print
000168 5d80                      	SUBI R24, -48			; convert to ASCII
000169 df32                      	RCALL lcd_write_chr
                                 
00016a 9508                      	RET
                                 
                                 
                                 showstat:
00016b df1f                      	RCALL lcd_clear_display
00016c e082                      	LDI R24, 2
00016d defd                      	RCALL delay_ms
00016e e0f2
00016f e1ee
000170 df25                      	PRINTSTRING totalstring
000171 e080                      	LDI RVAL, 0
000172 df7f                      	RCALL get_stat			; get total number of throws	
000173 938f                      	PUSH RVAL
000174 dfc0                      	RCALL printhex			; print as 2 hex numbers
000175 e288                      	LDI RVAL, '('
000176 df25                      	RCALL lcd_write_chr
000177 918f                      	POP RVAL
000178 dfd0                      	RCALL printdecimal		; print same number as decimal 0-255
000179 e289                      	LDI RVAL, ')'
00017a df21                      	RCALL lcd_write_chr
00017b defc                      	RCALL delay_1_s
                                 
00017c df0e                      	RCALL lcd_clear_display
00017d e082                      	LDI R24, 2
00017e deec                      	RCALL delay_ms
00017f e0f2
000180 e2e6
000181 df14                      	PRINTSTRING countones
000182 e081                      	LDI RVAL, 1
000183 df6e                      	RCALL get_stat			; get total number of throws	
000184 938f                      	PUSH RVAL
000185 dfaf                      	RCALL printhex			; print as 2 hex numbers
000186 e288                      	LDI RVAL, '('
000187 df14                      	RCALL lcd_write_chr
000188 918f                      	POP RVAL
000189 dfbf                      	RCALL printdecimal		; print same number as decimal 0-255
00018a e289                      	LDI RVAL, ')'
00018b df10                      	RCALL lcd_write_chr
00018c deeb                      	RCALL delay_1_s
                                 
00018d defd                      	RCALL lcd_clear_display
00018e e082                      	LDI R24, 2
00018f dedb                      	RCALL delay_ms
000190 e0f2
000191 e2ee
000192 df03                      	PRINTSTRING counttwos
000193 e082                      	LDI RVAL, 2
000194 df5d                      	RCALL get_stat			; get total number of throws	
000195 938f                      	PUSH RVAL
000196 df9e                      	RCALL printhex			; print as 2 hex numbers
000197 e288                      	LDI RVAL, '('
000198 df03                      	RCALL lcd_write_chr
000199 918f                      	POP RVAL
00019a dfae                      	RCALL printdecimal		; print same number as decimal 0-255
00019b e289                      	LDI RVAL, ')'
00019c deff                      	RCALL lcd_write_chr
00019d deda                      	RCALL delay_1_s
                                 
00019e deec                      	RCALL lcd_clear_display
00019f e082                      	LDI R24, 2
0001a0 deca                      	RCALL delay_ms
0001a1 e0f2
0001a2 e3e6
0001a3 def2                      	PRINTSTRING countthrees
0001a4 e083                      	LDI RVAL, 3
0001a5 df4c                      	RCALL get_stat			; get total number of throws	
0001a6 938f                      	PUSH RVAL
0001a7 df8d                      	RCALL printhex			; print as 2 hex numbers
0001a8 e288                      	LDI RVAL, '('
0001a9 def2                      	RCALL lcd_write_chr
0001aa 918f                      	POP RVAL
0001ab df9d                      	RCALL printdecimal		; print same number as decimal 0-255
0001ac e289                      	LDI RVAL, ')'
0001ad deee                      	RCALL lcd_write_chr
0001ae dec9                      	RCALL delay_1_s
                                 
0001af dedb                      	RCALL lcd_clear_display
0001b0 e082                      	LDI R24, 2
0001b1 deb9                      	RCALL delay_ms
0001b2 e0f2
0001b3 e3ee
0001b4 dee1                      	PRINTSTRING countfours
0001b5 e084                      	LDI RVAL, 4
0001b6 df3b                      	RCALL get_stat			; get total number of throws	
0001b7 938f                      	PUSH RVAL
0001b8 df7c                      	RCALL printhex			; print as 2 hex numbers
0001b9 e288                      	LDI RVAL, '('
0001ba dee1                      	RCALL lcd_write_chr
0001bb 918f                      	POP RVAL
0001bc df8c                      	RCALL printdecimal		; print same number as decimal 0-255
0001bd e289                      	LDI RVAL, ')'
0001be dedd                      	RCALL lcd_write_chr
0001bf deb8                      	RCALL delay_1_s
                                 
0001c0 deca                      	RCALL lcd_clear_display
0001c1 e082                      	LDI R24, 2
0001c2 dea8                      	RCALL delay_ms
0001c3 e0f2
0001c4 e4e6
0001c5 ded0                      	PRINTSTRING countfives
0001c6 e085                      	LDI RVAL, 5
0001c7 df2a                      	RCALL get_stat			; get total number of throws	
0001c8 938f                      	PUSH RVAL
0001c9 df6b                      	RCALL printhex			; print as 2 hex numbers
0001ca e288                      	LDI RVAL, '('
0001cb ded0                      	RCALL lcd_write_chr
0001cc 918f                      	POP RVAL
0001cd df7b                      	RCALL printdecimal		; print same number as decimal 0-255
0001ce e289                      	LDI RVAL, ')'
0001cf decc                      	RCALL lcd_write_chr
0001d0 dea7                      	RCALL delay_1_s
                                 
0001d1 deb9                      	RCALL lcd_clear_display
0001d2 e082                      	LDI R24, 2
0001d3 de97                      	RCALL delay_ms
0001d4 e0f2
0001d5 e4ee
0001d6 debf                      	PRINTSTRING countsixs
0001d7 e086                      	LDI RVAL, 6
0001d8 df19                      	RCALL get_stat			; get total number of throws	
0001d9 938f                      	PUSH RVAL
0001da df5a                      	RCALL printhex			; print as 2 hex numbers
0001db e288                      	LDI RVAL, '('
0001dc debf                      	RCALL lcd_write_chr
0001dd 918f                      	POP RVAL
0001de df6a                      	RCALL printdecimal		; print same number as decimal 0-255
0001df e289                      	LDI RVAL, ')'
0001e0 debb                      	RCALL lcd_write_chr
0001e1 de96                      	RCALL delay_1_s
                                 
0001e2 dea8                      	RCALL lcd_clear_display
0001e3 9508                      	RET
                                 
                                 clearstat:
0001e4 dea6                      	RCALL lcd_clear_display
0001e5 e082                      	LDI R24, 2
0001e6 de84                      	RCALL delay_ms
0001e7 e0f2
0001e8 e1e2
0001e9 deac                      	PRINTSTRING clearstring
0001ea df0e                      	RCALL clear_stat
0001eb 9508                      	RET
                                 	.INCLUDE "monitor.inc"
                                 
                                  * monitor.inc
                                  *
                                  *  Created: 2016-11-19 12:42:26
                                  *   Author: Magnus Krampell
                                  */ 
0001ec 6f4d
0001ed 696e
0001ee 6f74
0001ef 0072                       monitorstr: .DB "Monitor",0
                                 // moni_start_str: .DB ">0000: ",0
                                 
                                  init_monitor:
0001f0 9508                      	RET
                                 
                                 ; read keys from keyboard. If * - exit, if # advance address. if number - use as XH.
                                 moni_read_keyboard:
0001f1 decf                      	RCALL read_keyboard_num
0001f2 3083                      	CPI		RVAL, 0x03		; '*'?
0001f3 f049                      	BREQ monireadquit		; yes, go back
0001f4 308b                      	CPI		RVAL, 0x0B		; '#'?
0001f5 f039                      	BREQ monireadquit		; yes, go back
0001f6 308f                      	CPI		RVAL, NO_KEY
0001f7 f411                      	BRNE	moni_akey		; a key, which one?
0001f8 2e38                      	MOV		R3, RVAL		; save in case another key was pressed before this
0001f9 cff7                      	RJMP	moni_read_keyboard
                                 moni_akey:					; some key is pressed
                                 //rcall printhex
0001fa 1583                      	CP		RVAL, R3
0001fb f3a9                      	BREQ	moni_read_keyboard			; repeat key, skip...
0001fc 2e38                      	MOV		R3, RVAL		; no repeat, save new key to detect repeat next time
                                 			; ok, accept only one key, for now....
                                 monireadquit:
0001fd 9508                      	RET
                                 
                                 moni_print_address:
0001fe e38e                      	LDI RVAL, '>'
0001ff de9c                      	RCALL lcd_write_chr
000200 2f8b                      	MOV RVAL, XH
000201 df33                      	RCALL printhex
000202 2f8a                      	MOV RVAL, XL
000203 df31                      	RCALL printhex
000204 e38a                      	LDI RVAL, ':'
000205 de96                      	RCALL lcd_write_chr
000206 9508                      	RET
                                 
                                 ; monitor displays memory content on the format:
                                 ;	0x0100: 0xAB	The cell '0100' (hex) contains 'AB' (hex)
                                 ; the button # means "display the next cell"
                                 ; the button * means "go back to the main menu"
                                 
                                 monitor:
000207 de83                      	RCALL lcd_clear_display
000208 e082                      		LDI R24, 2
000209 de61                      	RCALL delay_ms
00020a e0f3
00020b ede8
00020c de89                      	PRINTSTRING monitorstr
00020d de6a                      	RCALL delay_1_s
00020e e0b0                      	LDI	XH,	0x00	; set start value
00020f e0a0                      	LDI	XL,	0x00
                                 moni_next:
000210 de7a                      	RCALL lcd_clear_display
000211 e082                      		LDI R24, 2
000212 de58                      	RCALL delay_ms
000213 dfea                      	RCALL moni_print_address
000214 918d                      	LD	RVAL, X+			; get memory value where X points...
000215 938f                      	PUSH RVAL
000216 df1e                      	RCALL printhex			; ; print that value on LCD, first as HEX...
000217 e288                      	LDI RVAL, '('
000218 de83                      	RCALL lcd_write_chr
000219 918f                      	POP RVAL
00021a df2e                      	RCALL printdecimal		; ...then as DECIMAL
00021b e289                      	LDI RVAL, ')'
00021c de7f                      	RCALL lcd_write_chr
                                 
00021d dfd3                      	RCALL moni_read_keyboard ; returns with "a real key", not NO_KEY!
00021e 3083                      	CPI		RVAL, 0x03		; '*'?
00021f f051                      	BREQ moniquit			; yes, quit
000220 308b                      	CPI		RVAL, 0x0B		; '#'?
000221 f029                      	BREQ moni_more
                                 
                                 	; some number was returned. Use it in the X register
000222 deb1                      	RCALL to_ASCII	; map key to corresponding number.....
000223 5380                      	SUBI RVAL, 0x30	; convert from ASCII to number
000224 2fb8                      	MOV	XH, RVAL	; use number as high start address
000225 27aa                      	CLR	XL			; set XL to 00
000226 cfe9                      	RJMP moni_next
                                 
                                 moni_more:			; continue and display next address
                                 					; X is already pointing at the next address...
000227 ec88                      	LDI		RVAL, 200
000228 de42                      	RCALL	delay_ms
000229 cfe6                      	RJMP moni_next
                                 	
                                 
                                 moniquit:
00022a 9508
00022b 3431
00022c 2a37
00022d 3532
00022e 3038
00022f 3633
000230 2339
000231 0000
000232 0f00                      	map_table: .DB "147*2580369#",0,0,0,NO_KEY
000233 6548
000234 6c6c
000235 006f                      	Hello_str: .DB "Hello",0
000236 6f52
000237 6c6c
000238 6e69
000239 2e67
00023a 2e2e
00023b 0000                      	Rolling_str: .DB "Rolling...",0,0
00023c 6156
00023d 756c
00023e 3a65
00023f 0020                      	Value_str: .DB "Value: ",0
                                 
                                 
                                 init:
                                 	; Set stack pointer to point at the end of RAM.
000240 ef0f                      	LDI R16, LOW(RAMEND)
000241 bf0d                      	OUT SPL, R16
000242 e00a                      	LDI R16, HIGH(RAMEND)
000243 bf0e                      	OUT SPH, R16
                                 	; Initialize pins
                                 
000244 940e 024d                 	CALL init_pins
                                 
000246 940e 00a3                 	CALL lcd_init
                                 
000248 940e 012b                 	CALL init_stat
                                 
00024a 940e 01f0                 	CALL init_monitor
                                 
                                 	; Jump to main part of program
00024c c00c                      	RJMP main
                                 
                                 ;==============================================================================
                                 ; Initialize I/O pins
                                 ;==============================================================================
                                 init_pins:	
                                 	//LDI R16, 0b10000000
                                 	//OUT DDRC, R16
00024d ef0f                      	LDI TEMP, 0xFF		
00024e b904                      	OUT DDRB, TEMP		;Stter alla B PORTAR som output
00024f bb00                      	OUT DDRF, TEMP		;Stter alla F PORTAR som output
000250 b905                      	OUT PORTB, TEMP
000251 bb01                      	OUT PORTF, TEMP
                                 
000252 ef0f                      	LDI TEMP, 0xFF
000253 b90a                      	OUT DDRD, TEMP
                                 
000254 e000                      	LDI TEMP, 0x00	;Stter PORTE som input
000255 b90d                      	OUT DDRE, TEMP
                                 
000256 9508                      	RET
                                 
                                 write_welcome:
000257 e0f1                      	LDI ZH, high(Str_1<<1)
000258 e0e2                      	LDI ZL, low(Str_1<<1)
                                 
                                 
                                 ; Replace with your application code
                                 main:
                                 	//LDI R24, 0b10000000
                                 	//RCALL lcd_write_instr
                                 
                                 	//RCALL write_welcome
                                 	
000259 e0f4
00025a e6e6
00025b de3a                      	PRINTSTRING Hello_str
                                 loop:
00025c d001                      	RCALL compare_keys
00025d cffe                      	RJMP loop
                                 
                                 compare_keys:
00025e de7c                      	RCALL read_keyboard
00025f 3382                      	CPI RVAL, ROLL_KEY
000260 f039                      	BREQ case2
000261 3383                      	CPI RVAL, STAT_KEY
000262 f0d1                      	BREQ case3
000263 3388                      	CPI RVAL, 0x38
000264 f0d1                      	BREQ case8
000265 3389                      	CPI RVAL, 0x39
000266 f0d1                      	BREQ case9
000267 cff4                      	RJMP loop
                                 
                                 
                                 case2:
                                 	
000268 de22                      	RCALL lcd_clear_display
000269 e082                      	LDI R24, 2
00026a de00                      	RCALL delay_ms
00026b e0f4
00026c e6ec
00026d de28                      	PRINTSTRING Rolling_str
00026e de6f                      	RCALL roll_dice
00026f de1b                      	RCALL lcd_clear_display
000270 e082                      	LDI R24, 2
000271 ddf9                      	RCALL delay_ms
000272 2f80                      	MOV R24, R16
000273 5d80                      	SUBI R24, -0x30
000274 938f                      	PUSH R24
000275 e0f4
000276 e7e8
000277 de1e                      	PRINTSTRING Value_str
000278 918f                      	POP R24
000279 de22                      	RCALL lcd_write_chr 
00027a de6d                      	RCALL store_stat
00027b ddfc                      	RCALL delay_1_s
00027c cfdf                      	RJMP loop
                                 
                                 
                                 case3:
00027d deed                      	RCALL showstat
00027e cfdd                      	RJMP loop
                                 
                                 
                                 case8:
00027f de79                      	RCALL clear_stat
000280 cfdb                      	RJMP loop
                                 case9:
000281 df85                      	RCALL monitor


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

"ATmega32U4" register use summary:
x  :   6 y  :   0 z  :   4 r0 :   0 r1 :   0 r2 :   0 r3 :   3 r4 :   0 
r5 :   2 r6 :   4 r7 :   0 r8 :   0 r9 :   0 r10:   0 r11:   0 r12:   0 
r13:   0 r14:   0 r15:   3 r16:  29 r17:   5 r18:  11 r19:   6 r20:   8 
r21:   0 r22:   0 r23:   2 r24: 137 r25:   0 r26:   7 r27:   6 r28:   0 
r29:   0 r30:  19 r31:  19 
Registers used: 17 out of 35 (48.6%)

"ATmega32U4" instruction use summary:
.lds  :   0 .sts  :   0 adc   :   4 add   :   5 adiw  :   0 and   :   0 
andi  :   2 asr   :   0 bclr  :   0 bld   :   0 brbc  :   0 brbs  :   0 
brcc  :   0 brcs  :   1 break :   0 breq  :  12 brge  :   0 brhc  :   0 
brhs  :   0 brid  :   0 brie  :   0 brlo  :   2 brlt  :   0 brmi  :   0 
brne  :   4 brpl  :   0 brsh  :   0 brtc  :   0 brts  :   0 brvc  :   0 
brvs  :   0 bset  :   0 bst   :   0 call  :   4 cbi   :   4 cbr   :   0 
clc   :   1 clh   :   0 cli   :   0 cln   :   0 clr   :   3 cls   :   0 
clt   :   0 clv   :   0 clz   :   0 com   :   0 cp    :   2 cpc   :   0 
cpi   :  16 cpse  :   0 dec   :   4 eor   :   0 fmul  :   0 fmuls :   0 
fmulsu:   0 icall :   0 ijmp  :   0 in    :   0 inc   :   4 jmp   :   0 
ld    :   4 ldd   :   0 ldi   : 118 lds   :   0 lpm   :   7 lsl   :   4 
lsr   :   0 mov   :  13 movw  :   0 mul   :   0 muls  :   0 mulsu :   0 
neg   :   0 nop   :  18 or    :   0 ori   :   0 out   :  10 pop   :  11 
push  :  11 rcall : 146 ret   :  27 reti  :   0 rjmp  :  17 rol   :   0 
ror   :   0 sbc   :   0 sbci  :   0 sbi   :   2 sbic  :   1 sbis  :   0 
sbiw  :   0 sbr   :   0 sbrc  :   0 sbrs  :   0 sec   :   0 seh   :   0 
sei   :   0 sen   :   0 ser   :   0 ses   :   0 set   :   0 sev   :   0 
sez   :   0 sleep :   0 spm   :   0 st    :   2 std   :   0 sts   :   7 
sub   :   1 subi  :   8 swap  :   3 tst   :   0 wdr   :   0 
Instructions used: 34 out of 113 (30.1%)

"ATmega32U4" memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x000506    972    144   1116   32768   3.4%
[.dseg] 0x000100 0x000107      0      7      7    2560   0.3%
[.eseg] 0x000000 0x000000      0      0      0    1024   0.0%

Assembly complete, 0 errors, 0 warnings
